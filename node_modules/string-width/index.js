import stripAnsi from"strip-ansi";import eastAsianWidth from"eastasianwidth";import emojiRegex from"emoji-regex";export default function stringWidth(t,e={}){if("string"!=typeof t||0===t.length)return 0;if(e={ambiguousIsNarrow:!0,...e},0===(t=stripAnsi(t)).length)return 0;t=t.replace(emojiRegex(),"  ");const i=e.ambiguousIsNarrow?1:2;let r=0;for(const e of t){const t=e.codePointAt(0);if(!(t<=31||t>=127&&t<=159||t>=768&&t<=879))switch(eastAsianWidth.eastAsianWidth(e)){case"F":case"W":r+=2;break;case"A":r+=i;break;default:r+=1}}return r}