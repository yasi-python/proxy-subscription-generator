import stripAnsi from"strip-ansi";import eastAsianWidth from"eastasianwidth";import emojiRegex from"emoji-regex";export default function stringWidth(t,i={}){if("string"!=typeof t||0===t.length)return 0;if(i={ambiguousIsNarrow:!0,...i},0===(t=stripAnsi(t)).length)return 0;t=t.replace(emojiRegex(),"  ");const e=i.ambiguousIsNarrow?1:2;let r=0;for(const i of t){const t=i.codePointAt(0);if(t<=31||t>=127&&t<=159)continue;if(t>=768&&t<=879)continue;switch(eastAsianWidth.eastAsianWidth(i)){case"F":case"W":r+=2;break;case"A":r+=e;break;default:r+=1}}return r}