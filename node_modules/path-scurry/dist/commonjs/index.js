"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(e,t,i);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathScurry=exports.Path=exports.PathScurryDarwin=exports.PathScurryPosix=exports.PathScurryWin32=exports.PathScurryBase=exports.PathPosix=exports.PathWin32=exports.PathBase=exports.ChildrenCache=exports.ResolveCache=void 0;const lru_cache_1=require("lru-cache"),node_path_1=require("node:path"),node_url_1=require("node:url"),fs_1=require("fs"),actualFS=__importStar(require("node:fs")),realpathSync=fs_1.realpathSync.native,promises_1=require("node:fs/promises"),minipass_1=require("minipass"),defaultFS={lstatSync:fs_1.lstatSync,readdir:fs_1.readdir,readdirSync:fs_1.readdirSync,readlinkSync:fs_1.readlinkSync,realpathSync:realpathSync,promises:{lstat:promises_1.lstat,readdir:promises_1.readdir,readlink:promises_1.readlink,realpath:promises_1.realpath}},fsFromOption=t=>t&&t!==defaultFS&&t!==actualFS?{...defaultFS,...t,promises:{...defaultFS.promises,...t.promises||{}}}:defaultFS,uncDriveRegexp=/^\\\\\?\\([a-z]:)\\?$/i,uncToDrive=t=>t.replace(/\//g,"\\").replace(uncDriveRegexp,"$1\\"),eitherSep=/[\\\/]/,UNKNOWN=0,IFIFO=1,IFCHR=2,IFDIR=4,IFBLK=6,IFREG=8,IFLNK=10,IFSOCK=12,IFMT=15,IFMT_UNKNOWN=-16,READDIR_CALLED=16,LSTAT_CALLED=32,ENOTDIR=64,ENOENT=128,ENOREADLINK=256,ENOREALPATH=512,ENOCHILD=704,TYPEMASK=1023,entToType=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?10:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,normalizeCache=new Map,normalize=t=>{const e=normalizeCache.get(t);if(e)return e;const i=t.normalize("NFKD");return normalizeCache.set(t,i),i},normalizeNocaseCache=new Map,normalizeNocase=t=>{const e=normalizeNocaseCache.get(t);if(e)return e;const i=normalize(t.toLowerCase());return normalizeNocaseCache.set(t,i),i};class ResolveCache extends lru_cache_1.LRUCache{constructor(){super({max:256})}}exports.ResolveCache=ResolveCache;class ChildrenCache extends lru_cache_1.LRUCache{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}exports.ChildrenCache=ChildrenCache;const setAsCwd=Symbol("PathScurry setAsCwd");class PathBase{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#i;get mode(){return this.#i}#s;get nlink(){return this.#s}#r;get uid(){return this.#r}#a;get gid(){return this.#a}#n;get rdev(){return this.#n}#h;get blksize(){return this.#h}#o;get ino(){return this.#o}#l;get size(){return this.#l}#c;get blocks(){return this.#c}#d;get atimeMs(){return this.#d}#p;get mtimeMs(){return this.#p}#u;get ctimeMs(){return this.#u}#f;get birthtimeMs(){return this.#f}#y;get atime(){return this.#y}#m;get mtime(){return this.#m}#w;get ctime(){return this.#w}#v;get birthtime(){return this.#v}#P;#S;#g;#k;#C;#F;#x;#T;#R;#N;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=0,i,s,r,a,n){this.name=t,this.#P=r?normalizeNocase(t):normalize(t),this.#x=1023&e,this.nocase=r,this.roots=s,this.root=i||this,this.#T=a,this.#g=n.fullpath,this.#C=n.relative,this.#F=n.relativePosix,this.parent=n.parent,this.parent?this.#t=this.parent.#t:this.#t=fsFromOption(n.fs)}depth(){return void 0!==this.#S?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#T}resolve(t){if(!t)return this;const e=this.getRootString(t),i=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#_(i):this.#_(i)}#_(t){let e=this;for(const i of t)e=e.child(i);return e}children(){const t=this.#T.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#T.set(this,e),this.#x&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const i=this.children(),s=this.nocase?normalizeNocase(t):normalize(t);for(const t of i)if(t.#P===s)return t;const r=this.parent?this.sep:"",a=this.#g?this.#g+r+t:void 0,n=this.newChild(t,0,{...e,parent:this,fullpath:a});return this.canReaddir()||(n.#x|=128),i.push(n),n}relative(){if(this.isCWD)return"";if(void 0!==this.#C)return this.#C;const t=this.name,e=this.parent;if(!e)return this.#C=this.name;const i=e.relative();return i+(i&&e.parent?this.sep:"")+t}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#F)return this.#F;const t=this.name,e=this.parent;if(!e)return this.#F=this.fullpathPosix();const i=e.relativePosix();return i+(i&&e.parent?"/":"")+t}fullpath(){if(void 0!==this.#g)return this.#g;const t=this.name,e=this.parent;if(!e)return this.#g=this.name;const i=e.fullpath()+(e.parent?this.sep:"")+t;return this.#g=i}fullpathPosix(){if(void 0!==this.#k)return this.#k;if("/"===this.sep)return this.#k=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#k=`//?/${t}`:this.#k=t}const t=this.parent,e=t.fullpathPosix(),i=e+(e&&t.parent?"/":"")+this.name;return this.#k=i}isUnknown(){return!(15&this.#x)}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8==(15&this.#x)}isDirectory(){return 4==(15&this.#x)}isCharacterDevice(){return 2==(15&this.#x)}isBlockDevice(){return 6==(15&this.#x)}isFIFO(){return 1==(15&this.#x)}isSocket(){return 12==(15&this.#x)}isSymbolicLink(){return!(10&~this.#x)}lstatCached(){return 32&this.#x?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#N}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;const t=15&this.#x;return!(0!==t&&10!==t||256&this.#x||128&this.#x)}calledReaddir(){return!!(16&this.#x)}isENOENT(){return!!(128&this.#x)}isNamed(t){return this.nocase?this.#P===normalizeNocase(t):this.#P===normalize(t)}async readlink(){const t=this.#R;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#t.promises.readlink(this.fullpath()),e=(await this.parent.realpath())?.resolve(t);if(e)return this.#R=e}catch(t){return void this.#b(t.code)}}readlinkSync(){const t=this.#R;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#t.readlinkSync(this.fullpath()),e=this.parent.realpathSync()?.resolve(t);if(e)return this.#R=e}catch(t){return void this.#b(t.code)}}#E(t){this.#x|=16;for(let e=t.provisional;e<t.length;e++){const i=t[e];i&&i.#O()}}#O(){128&this.#x||(this.#x=-16&this.#x|128,this.#D())}#D(){const t=this.children();t.provisional=0;for(const e of t)e.#O()}#B(){this.#x|=512,this.#M()}#M(){if(64&this.#x)return;let t=this.#x;4==(15&t)&&(t&=-16),this.#x=64|t,this.#D()}#I(t=""){"ENOTDIR"===t||"EPERM"===t?this.#M():"ENOENT"===t?this.#O():this.children().provisional=0}#z(t=""){if("ENOTDIR"===t){this.parent.#M()}else"ENOENT"===t&&this.#O()}#b(t=""){let e=this.#x;e|=256,"ENOENT"===t&&(e|=128),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=-16),this.#x=e,"ENOTDIR"===t&&this.parent&&this.parent.#M()}#W(t,e){return this.#A(t,e)||this.#L(t,e)}#L(t,e){const i=entToType(t),s=this.newChild(t.name,i,{parent:this}),r=15&s.#x;return 4!==r&&10!==r&&0!==r&&(s.#x|=64),e.unshift(s),e.provisional++,s}#A(t,e){for(let i=e.provisional;i<e.length;i++){const s=e[i];if((this.nocase?normalizeNocase(t.name):normalize(t.name))===s.#P)return this.#U(t,s,i,e)}}#U(t,e,i,s){const r=e.name;return e.#x=-16&e.#x|entToType(t),r!==t.name&&(e.name=t.name),i!==s.provisional&&(i===s.length-1?s.pop():s.splice(i,1),s.unshift(e)),s.provisional++,e}async lstat(){if(!(128&this.#x))try{return this.#j(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#z(t.code)}}lstatSync(){if(!(128&this.#x))try{return this.#j(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#z(t.code)}}#j(t){const{atime:e,atimeMs:i,birthtime:s,birthtimeMs:r,blksize:a,blocks:n,ctime:h,ctimeMs:o,dev:l,gid:c,ino:d,mode:p,mtime:u,mtimeMs:f,nlink:y,rdev:m,size:w,uid:v}=t;this.#y=e,this.#d=i,this.#v=s,this.#f=r,this.#h=a,this.#c=n,this.#w=h,this.#u=o,this.#e=l,this.#a=c,this.#o=d,this.#i=p,this.#m=u,this.#p=f,this.#s=y,this.#n=m,this.#l=w,this.#r=v;const P=entToType(t);this.#x=-16&this.#x|P|32,0!==P&&4!==P&&10!==P&&(this.#x|=64)}#q=[];#K=!1;#$(t){this.#K=!1;const e=this.#q.slice();this.#q.length=0,e.forEach(e=>e(null,t))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask(()=>t(null,[])));const i=this.children();if(this.calledReaddir()){const s=i.slice(0,i.provisional);return void(e?t(null,s):queueMicrotask(()=>t(null,s)))}if(this.#q.push(t),this.#K)return;this.#K=!0;const s=this.fullpath();this.#t.readdir(s,{withFileTypes:!0},(t,e)=>{if(t)this.#I(t.code),i.provisional=0;else{for(const t of e)this.#W(t,i);this.#E(i)}this.#$(i.slice(0,i.provisional))})}#H;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#H)await this.#H;else{let i=()=>{};this.#H=new Promise(t=>i=t);try{for(const i of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#W(i,t);this.#E(t)}catch(e){this.#I(e.code),t.provisional=0}this.#H=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const i of this.#t.readdirSync(e,{withFileTypes:!0}))this.#W(i,t);this.#E(t)}catch(e){this.#I(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#x)return!1;const t=15&this.#x;return 0===t||4===t||10===t}shouldWalk(t,e){return!(4&~this.#x)&&!(704&this.#x)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#N)return this.#N;if(!(896&this.#x))try{const t=await this.#t.promises.realpath(this.fullpath());return this.#N=this.resolve(t)}catch(t){this.#B()}}realpathSync(){if(this.#N)return this.#N;if(!(896&this.#x))try{const t=this.#t.realpathSync(this.fullpath());return this.#N=this.resolve(t)}catch(t){this.#B()}}[setAsCwd](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;const e=new Set([]);let i=[],s=this;for(;s&&s.parent;)e.add(s),s.#C=i.join(this.sep),s.#F=i.join("/"),s=s.parent,i.push("..");for(s=t;s&&s.parent&&!e.has(s);)s.#C=void 0,s.#F=void 0,s=s.parent}}exports.PathBase=PathBase;class PathWin32 extends PathBase{sep="\\";splitSep=eitherSep;constructor(t,e=0,i,s,r,a,n){super(t,e,i,s,r,a,n)}newChild(t,e=0,i={}){return new PathWin32(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return node_path_1.win32.parse(t).root}getRoot(t){if((t=uncToDrive(t.toUpperCase()))===this.root.name)return this.root;for(const[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new PathScurryWin32(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(uncDriveRegexp,"$1\\"))===e}}exports.PathWin32=PathWin32;class PathPosix extends PathBase{splitSep="/";sep="/";constructor(t,e=0,i,s,r,a,n){super(t,e,i,s,r,a,n)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,i={}){return new PathPosix(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}}exports.PathPosix=PathPosix;class PathScurryBase{root;rootPath;roots;cwd;#G;#V;#T;nocase;#t;constructor(t=process.cwd(),e,i,{nocase:s,childrenCacheSize:r=16384,fs:a=defaultFS}={}){this.#t=fsFromOption(a),(t instanceof URL||t.startsWith("file://"))&&(t=(0,node_url_1.fileURLToPath)(t));const n=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(n),this.#G=new ResolveCache,this.#V=new ResolveCache,this.#T=new ChildrenCache(r);const h=n.substring(this.rootPath.length).split(i);if(1!==h.length||h[0]||h.pop(),void 0===s)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#t),this.roots[this.rootPath]=this.root;let o=this.root,l=h.length-1;const c=e.sep;let d=this.rootPath,p=!1;for(const t of h){const e=l--;o=o.child(t,{relative:new Array(e).fill("..").join(c),relativePosix:new Array(e).fill("..").join("/"),fullpath:d+=(p?"":c)+t}),p=!0}this.cwd=o}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#T}resolve(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#G.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpath();return this.#G.set(e,s),s}resolvePosix(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#V.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpathPosix();return this.#V.set(e,s),s}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i}=e;if(t.canReaddir()){const e=await t.readdir();return i?e:e.map(t=>t.name)}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map(t=>t.name):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const i=await t.readlink();return e?i:i?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const i=t.readlinkSync();return e?i:i?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const i=await t.realpath();return e?i:i?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const i=t.realpathSync();return e?i:i?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:a}=e,n=[];r&&!r(t)||n.push(i?t:t.fullpath());const h=new Set,o=(t,e)=>{h.add(t),t.readdirCB((t,l)=>{if(t)return e(t);let c=l.length;if(!c)return e();const d=()=>{0===--c&&e()};for(const t of l)r&&!r(t)||n.push(i?t:t.fullpath()),s&&t.isSymbolicLink()?t.realpath().then(t=>t?.isUnknown()?t.lstat():t).then(t=>t?.shouldWalk(h,a)?o(t,d):d()):t.shouldWalk(h,a)?o(t,d):d()},!0)},l=t;return new Promise((t,e)=>{o(l,i=>{if(i)return e(i);t(n)})})}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:a}=e,n=[];r&&!r(t)||n.push(i?t:t.fullpath());const h=new Set([t]);for(const t of h){const e=t.readdirSync();for(const t of e){r&&!r(t)||n.push(i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(h,a)&&h.add(e)}}return n}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:a}=e;r&&!r(t)||(yield i?t:t.fullpath());const n=new Set([t]);for(const t of n){const e=t.readdirSync();for(const t of e){r&&!r(t)||(yield i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(n,a)&&n.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:a}=e,n=new minipass_1.Minipass({objectMode:!0});r&&!r(t)||n.write(i?t:t.fullpath());const h=new Set,o=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=o.shift();if(!e)return void(0===l&&n.end());l++,h.add(e);const d=(e,u,f=!1)=>{if(e)return n.emit("error",e);if(s&&!f){const t=[];for(const e of u)e.isSymbolicLink()&&t.push(e.realpath().then(t=>t?.isUnknown()?t.lstat():t));if(t.length)return void Promise.all(t).then(()=>d(null,u,!0))}for(const e of u)!e||r&&!r(e)||n.write(i?e:e.fullpath())||(t=!0);l--;for(const t of u){const e=t.realpathCached()||t;e.shouldWalk(h,a)&&o.push(e)}t&&!n.flowing?n.once("drain",c):p||c()};let p=!0;e.readdirCB(d,!0),p=!1}};return c(),n}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:a}=e,n=new minipass_1.Minipass({objectMode:!0}),h=new Set;r&&!r(t)||n.write(i?t:t.fullpath());const o=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=o.shift();if(!e)return void(0===l&&n.end());l++,h.add(e);const c=e.readdirSync();for(const e of c)r&&!r(e)||n.write(i?e:e.fullpath())||(t=!0);l--;for(const t of c){let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(h,a)&&o.push(e)}}t&&!n.flowing&&n.once("drain",c)};return c(),n}chdir(t=this.cwd){const e=this.cwd;this.cwd="string"==typeof t?this.cwd.resolve(t):t,this.cwd[setAsCwd](e)}}exports.PathScurryBase=PathScurryBase;class PathScurryWin32 extends PathScurryBase{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:i=!0}=e;super(t,node_path_1.win32,"\\",{...e,nocase:i}),this.nocase=i;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return node_path_1.win32.parse(t).root.toUpperCase()}newRoot(t){return new PathWin32(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}exports.PathScurryWin32=PathScurryWin32;class PathScurryPosix extends PathScurryBase{sep="/";constructor(t=process.cwd(),e={}){const{nocase:i=!1}=e;super(t,node_path_1.posix,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new PathPosix(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}exports.PathScurryPosix=PathScurryPosix;class PathScurryDarwin extends PathScurryPosix{constructor(t=process.cwd(),e={}){const{nocase:i=!0}=e;super(t,{...e,nocase:i})}}exports.PathScurryDarwin=PathScurryDarwin,exports.Path="win32"===process.platform?PathWin32:PathPosix,exports.PathScurry="win32"===process.platform?PathScurryWin32:"darwin"===process.platform?PathScurryDarwin:PathScurryPosix;