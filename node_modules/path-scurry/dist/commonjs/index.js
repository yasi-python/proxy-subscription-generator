"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s);var r=Object.getOwnPropertyDescriptor(e,s);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,i,r)}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&__createBinding(e,t,s);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathScurry=exports.Path=exports.PathScurryDarwin=exports.PathScurryPosix=exports.PathScurryWin32=exports.PathScurryBase=exports.PathPosix=exports.PathWin32=exports.PathBase=exports.ChildrenCache=exports.ResolveCache=void 0;const lru_cache_1=require("lru-cache"),node_path_1=require("node:path"),node_url_1=require("node:url"),fs_1=require("fs"),actualFS=__importStar(require("node:fs")),realpathSync=fs_1.realpathSync.native,promises_1=require("node:fs/promises"),minipass_1=require("minipass"),defaultFS={lstatSync:fs_1.lstatSync,readdir:fs_1.readdir,readdirSync:fs_1.readdirSync,readlinkSync:fs_1.readlinkSync,realpathSync:realpathSync,promises:{lstat:promises_1.lstat,readdir:promises_1.readdir,readlink:promises_1.readlink,realpath:promises_1.realpath}},fsFromOption=t=>t&&t!==defaultFS&&t!==actualFS?{...defaultFS,...t,promises:{...defaultFS.promises,...t.promises||{}}}:defaultFS,uncDriveRegexp=/^\\\\\?\\([a-z]:)\\?$/i,uncToDrive=t=>t.replace(/\//g,"\\").replace(uncDriveRegexp,"$1\\"),eitherSep=/[\\\/]/,UNKNOWN=0,IFIFO=1,IFCHR=2,IFDIR=4,IFBLK=6,IFREG=8,IFLNK=10,IFSOCK=12,IFMT=15,IFMT_UNKNOWN=-16,READDIR_CALLED=16,LSTAT_CALLED=32,ENOTDIR=64,ENOENT=128,ENOREADLINK=256,ENOREALPATH=512,ENOCHILD=704,TYPEMASK=1023,entToType=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?10:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,normalizeCache=new Map,normalize=t=>{const e=normalizeCache.get(t);if(e)return e;const s=t.normalize("NFKD");return normalizeCache.set(t,s),s},normalizeNocaseCache=new Map,normalizeNocase=t=>{const e=normalizeNocaseCache.get(t);if(e)return e;const s=normalize(t.toLowerCase());return normalizeNocaseCache.set(t,s),s};class ResolveCache extends lru_cache_1.LRUCache{constructor(){super({max:256})}}exports.ResolveCache=ResolveCache;class ChildrenCache extends lru_cache_1.LRUCache{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}exports.ChildrenCache=ChildrenCache;const setAsCwd=Symbol("PathScurry setAsCwd");class PathBase{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#s;get mode(){return this.#s}#i;get nlink(){return this.#i}#r;get uid(){return this.#r}#n;get gid(){return this.#n}#h;get rdev(){return this.#h}#o;get blksize(){return this.#o}#a;get ino(){return this.#a}#c;get size(){return this.#c}#l;get blocks(){return this.#l}#u;get atimeMs(){return this.#u}#p;get mtimeMs(){return this.#p}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#y;get mtime(){return this.#y}#m;get ctime(){return this.#m}#S;get birthtime(){return this.#S}#v;#P;#F;#g;#k;#C;#_;#x;#R;#T;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=0,s,i,r,n,h){this.name=t,this.#v=r?normalizeNocase(t):normalize(t),this.#_=1023&e,this.nocase=r,this.roots=i,this.root=s||this,this.#x=n,this.#F=h.fullpath,this.#k=h.relative,this.#C=h.relativePosix,this.parent=h.parent,this.parent?this.#t=this.parent.#t:this.#t=fsFromOption(h.fs)}depth(){return void 0!==this.#P?this.#P:this.parent?this.#P=this.parent.depth()+1:this.#P=0}childrenCache(){return this.#x}resolve(t){if(!t)return this;const e=this.getRootString(t),s=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#b(s):this.#b(s)}#b(t){let e=this;for(const s of t)e=e.child(s);return e}children(){const t=this.#x.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#x.set(this,e),this.#_&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const s=this.children(),i=this.nocase?normalizeNocase(t):normalize(t);for(const t of s)if(t.#v===i)return t;const r=this.parent?this.sep:"",n=this.#F?this.#F+r+t:void 0,h=this.newChild(t,0,{...e,parent:this,fullpath:n});return this.canReaddir()||(h.#_|=128),s.push(h),h}relative(){if(this.isCWD)return"";if(void 0!==this.#k)return this.#k;const t=this.name,e=this.parent;if(!e)return this.#k=this.name;const s=e.relative();return s+(s&&e.parent?this.sep:"")+t}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#C)return this.#C;const t=this.name,e=this.parent;if(!e)return this.#C=this.fullpathPosix();const s=e.relativePosix();return s+(s&&e.parent?"/":"")+t}fullpath(){if(void 0!==this.#F)return this.#F;const t=this.name,e=this.parent;if(!e)return this.#F=this.name;const s=e.fullpath()+(e.parent?this.sep:"")+t;return this.#F=s}fullpathPosix(){if(void 0!==this.#g)return this.#g;if("/"===this.sep)return this.#g=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#g=`//?/${t}`:this.#g=t}const t=this.parent,e=t.fullpathPosix(),s=e+(e&&t.parent?"/":"")+this.name;return this.#g=s}isUnknown(){return!(15&this.#_)}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8==(15&this.#_)}isDirectory(){return 4==(15&this.#_)}isCharacterDevice(){return 2==(15&this.#_)}isBlockDevice(){return 6==(15&this.#_)}isFIFO(){return 1==(15&this.#_)}isSocket(){return 12==(15&this.#_)}isSymbolicLink(){return!(10&~this.#_)}lstatCached(){return 32&this.#_?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#T}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;const t=15&this.#_;return!(0!==t&&10!==t||256&this.#_||128&this.#_)}calledReaddir(){return!!(16&this.#_)}isENOENT(){return!!(128&this.#_)}isNamed(t){return this.nocase?this.#v===normalizeNocase(t):this.#v===normalize(t)}async readlink(){const t=this.#R;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#t.promises.readlink(this.fullpath()),e=(await this.parent.realpath())?.resolve(t);if(e)return this.#R=e}catch(t){return void this.#D(t.code)}}readlinkSync(){const t=this.#R;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#t.readlinkSync(this.fullpath()),e=this.parent.realpathSync()?.resolve(t);if(e)return this.#R=e}catch(t){return void this.#D(t.code)}}#N(t){this.#_|=16;for(let e=t.provisional;e<t.length;e++){const s=t[e];s&&s.#O()}}#O(){128&this.#_||(this.#_=-16&this.#_|128,this.#B())}#B(){const t=this.children();t.provisional=0;for(const e of t)e.#O()}#W(){this.#_|=512,this.#E()}#E(){if(64&this.#_)return;let t=this.#_;4==(15&t)&&(t&=-16),this.#_=64|t,this.#B()}#z(t=""){"ENOTDIR"===t||"EPERM"===t?this.#E():"ENOENT"===t?this.#O():this.children().provisional=0}#I(t=""){"ENOTDIR"===t?this.parent.#E():"ENOENT"===t&&this.#O()}#D(t=""){let e=this.#_;e|=256,"ENOENT"===t&&(e|=128),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=-16),this.#_=e,"ENOTDIR"===t&&this.parent&&this.parent.#E()}#M(t,e){return this.#L(t,e)||this.#A(t,e)}#A(t,e){const s=entToType(t),i=this.newChild(t.name,s,{parent:this}),r=15&i.#_;return 4!==r&&10!==r&&0!==r&&(i.#_|=64),e.unshift(i),e.provisional++,i}#L(t,e){for(let s=e.provisional;s<e.length;s++){const i=e[s];if((this.nocase?normalizeNocase(t.name):normalize(t.name))===i.#v)return this.#U(t,i,s,e)}}#U(t,e,s,i){const r=e.name;return e.#_=-16&e.#_|entToType(t),r!==t.name&&(e.name=t.name),s!==i.provisional&&(s===i.length-1?i.pop():i.splice(s,1),i.unshift(e)),i.provisional++,e}async lstat(){if(!(128&this.#_))try{return this.#j(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#I(t.code)}}lstatSync(){if(!(128&this.#_))try{return this.#j(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#I(t.code)}}#j(t){const{atime:e,atimeMs:s,birthtime:i,birthtimeMs:r,blksize:n,blocks:h,ctime:o,ctimeMs:a,dev:c,gid:l,ino:u,mode:p,mtime:d,mtimeMs:f,nlink:w,rdev:y,size:m,uid:S}=t;this.#w=e,this.#u=s,this.#S=i,this.#f=r,this.#o=n,this.#l=h,this.#m=o,this.#d=a,this.#e=c,this.#n=l,this.#a=u,this.#s=p,this.#y=d,this.#p=f,this.#i=w,this.#h=y,this.#c=m,this.#r=S;const v=entToType(t);this.#_=-16&this.#_|v|32,0!==v&&4!==v&&10!==v&&(this.#_|=64)}#q=[];#K=!1;#$(t){this.#K=!1;const e=this.#q.slice();this.#q.length=0,e.forEach(e=>e(null,t))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask(()=>t(null,[])));const s=this.children();if(this.calledReaddir()){const i=s.slice(0,s.provisional);return void(e?t(null,i):queueMicrotask(()=>t(null,i)))}if(this.#q.push(t),this.#K)return;this.#K=!0;const i=this.fullpath();this.#t.readdir(i,{withFileTypes:!0},(t,e)=>{if(t)this.#z(t.code),s.provisional=0;else{for(const t of e)this.#M(t,s);this.#N(s)}this.#$(s.slice(0,s.provisional))})}#H;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#H)await this.#H;else{let s=()=>{};this.#H=new Promise(t=>s=t);try{for(const s of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#M(s,t);this.#N(t)}catch(e){this.#z(e.code),t.provisional=0}this.#H=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const s of this.#t.readdirSync(e,{withFileTypes:!0}))this.#M(s,t);this.#N(t)}catch(e){this.#z(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#_)return!1;const t=15&this.#_;return 0===t||4===t||10===t}shouldWalk(t,e){return!(4&~this.#_)&&!(704&this.#_)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#T)return this.#T;if(!(896&this.#_))try{const t=await this.#t.promises.realpath(this.fullpath());return this.#T=this.resolve(t)}catch(t){this.#W()}}realpathSync(){if(this.#T)return this.#T;if(!(896&this.#_))try{const t=this.#t.realpathSync(this.fullpath());return this.#T=this.resolve(t)}catch(t){this.#W()}}[setAsCwd](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;const e=new Set([]);let s=[],i=this;for(;i&&i.parent;)e.add(i),i.#k=s.join(this.sep),i.#C=s.join("/"),i=i.parent,s.push("..");for(i=t;i&&i.parent&&!e.has(i);)i.#k=void 0,i.#C=void 0,i=i.parent}}exports.PathBase=PathBase;class PathWin32 extends PathBase{sep="\\";splitSep=eitherSep;constructor(t,e=0,s,i,r,n,h){super(t,e,s,i,r,n,h)}newChild(t,e=0,s={}){return new PathWin32(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return node_path_1.win32.parse(t).root}getRoot(t){if((t=uncToDrive(t.toUpperCase()))===this.root.name)return this.root;for(const[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new PathScurryWin32(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(uncDriveRegexp,"$1\\"))===e}}exports.PathWin32=PathWin32;class PathPosix extends PathBase{splitSep="/";sep="/";constructor(t,e=0,s,i,r,n,h){super(t,e,s,i,r,n,h)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,s={}){return new PathPosix(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}}exports.PathPosix=PathPosix;class PathScurryBase{root;rootPath;roots;cwd;#G;#V;#x;nocase;#t;constructor(t=process.cwd(),e,s,{nocase:i,childrenCacheSize:r=16384,fs:n=defaultFS}={}){this.#t=fsFromOption(n),(t instanceof URL||t.startsWith("file://"))&&(t=(0,node_url_1.fileURLToPath)(t));const h=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(h),this.#G=new ResolveCache,this.#V=new ResolveCache,this.#x=new ChildrenCache(r);const o=h.substring(this.rootPath.length).split(s);if(1!==o.length||o[0]||o.pop(),void 0===i)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#t),this.roots[this.rootPath]=this.root;let a=this.root,c=o.length-1;const l=e.sep;let u=this.rootPath,p=!1;for(const t of o){const e=c--;a=a.child(t,{relative:new Array(e).fill("..").join(l),relativePosix:new Array(e).fill("..").join("/"),fullpath:u+=(p?"":l)+t}),p=!0}this.cwd=a}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#x}resolve(...t){let e="";for(let s=t.length-1;s>=0;s--){const i=t[s];if(i&&"."!==i&&(e=e?`${i}/${e}`:i,this.isAbsolute(i)))break}const s=this.#G.get(e);if(void 0!==s)return s;const i=this.cwd.resolve(e).fullpath();return this.#G.set(e,i),i}resolvePosix(...t){let e="";for(let s=t.length-1;s>=0;s--){const i=t[s];if(i&&"."!==i&&(e=e?`${i}/${e}`:i,this.isAbsolute(i)))break}const s=this.#V.get(e);if(void 0!==s)return s;const i=this.cwd.resolve(e).fullpathPosix();return this.#V.set(e,i),i}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s}=e;if(t.canReaddir()){const e=await t.readdir();return s?e:e.map(t=>t.name)}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(t=>t.name):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t.withFileTypes,t=this.cwd);const s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:i=!1,filter:r,walkFilter:n}=e,h=[];r&&!r(t)||h.push(s?t:t.fullpath());const o=new Set,a=(t,e)=>{o.add(t),t.readdirCB((t,c)=>{if(t)return e(t);let l=c.length;if(!l)return e();const u=()=>{0===--l&&e()};for(const t of c)r&&!r(t)||h.push(s?t:t.fullpath()),i&&t.isSymbolicLink()?t.realpath().then(t=>t?.isUnknown()?t.lstat():t).then(t=>t?.shouldWalk(o,n)?a(t,u):u()):t.shouldWalk(o,n)?a(t,u):u()},!0)},c=t;return new Promise((t,e)=>{a(c,s=>{if(s)return e(s);t(h)})})}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:i=!1,filter:r,walkFilter:n}=e,h=[];r&&!r(t)||h.push(s?t:t.fullpath());const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){r&&!r(t)||h.push(s?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!i||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,n)&&o.add(e)}}return h}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:i=!1,filter:r,walkFilter:n}=e;r&&!r(t)||(yield s?t:t.fullpath());const h=new Set([t]);for(const t of h){const e=t.readdirSync();for(const t of e){r&&!r(t)||(yield s?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!i||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(h,n)&&h.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:i=!1,filter:r,walkFilter:n}=e,h=new minipass_1.Minipass({objectMode:!0});r&&!r(t)||h.write(s?t:t.fullpath());const o=new Set,a=[t];let c=0;const l=()=>{let t=!1;for(;!t;){const e=a.shift();if(!e)return void(0===c&&h.end());c++,o.add(e);const u=(e,d,f=!1)=>{if(e)return h.emit("error",e);if(i&&!f){const t=[];for(const e of d)e.isSymbolicLink()&&t.push(e.realpath().then(t=>t?.isUnknown()?t.lstat():t));if(t.length)return void Promise.all(t).then(()=>u(null,d,!0))}for(const e of d)!e||r&&!r(e)||h.write(s?e:e.fullpath())||(t=!0);c--;for(const t of d){const e=t.realpathCached()||t;e.shouldWalk(o,n)&&a.push(e)}t&&!h.flowing?h.once("drain",l):p||l()};let p=!0;e.readdirCB(u,!0),p=!1}};return l(),h}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof PathBase||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:i=!1,filter:r,walkFilter:n}=e,h=new minipass_1.Minipass({objectMode:!0}),o=new Set;r&&!r(t)||h.write(s?t:t.fullpath());const a=[t];let c=0;const l=()=>{let t=!1;for(;!t;){const e=a.shift();if(!e)return void(0===c&&h.end());c++,o.add(e);const l=e.readdirSync();for(const e of l)r&&!r(e)||h.write(s?e:e.fullpath())||(t=!0);c--;for(const t of l){let e=t;if(t.isSymbolicLink()){if(!i||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,n)&&a.push(e)}}t&&!h.flowing&&h.once("drain",l)};return l(),h}chdir(t=this.cwd){const e=this.cwd;this.cwd="string"==typeof t?this.cwd.resolve(t):t,this.cwd[setAsCwd](e)}}exports.PathScurryBase=PathScurryBase;class PathScurryWin32 extends PathScurryBase{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:s=!0}=e;super(t,node_path_1.win32,"\\",{...e,nocase:s}),this.nocase=s;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return node_path_1.win32.parse(t).root.toUpperCase()}newRoot(t){return new PathWin32(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}exports.PathScurryWin32=PathScurryWin32;class PathScurryPosix extends PathScurryBase{sep="/";constructor(t=process.cwd(),e={}){const{nocase:s=!1}=e;super(t,node_path_1.posix,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new PathPosix(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}exports.PathScurryPosix=PathScurryPosix;class PathScurryDarwin extends PathScurryPosix{constructor(t=process.cwd(),e={}){const{nocase:s=!0}=e;super(t,{...e,nocase:s})}}exports.PathScurryDarwin=PathScurryDarwin,exports.Path="win32"===process.platform?PathWin32:PathPosix,exports.PathScurry="win32"===process.platform?PathScurryWin32:"darwin"===process.platform?PathScurryDarwin:PathScurryPosix;