"use strict";exports.__esModule=!0,exports.default=void 0;var _WHITESPACE_TOKENS,_Object$assign,_root=_interopRequireDefault(require("./selectors/root")),_selector=_interopRequireDefault(require("./selectors/selector")),_className=_interopRequireDefault(require("./selectors/className")),_comment=_interopRequireDefault(require("./selectors/comment")),_id=_interopRequireDefault(require("./selectors/id")),_tag=_interopRequireDefault(require("./selectors/tag")),_string=_interopRequireDefault(require("./selectors/string")),_pseudo=_interopRequireDefault(require("./selectors/pseudo")),_attribute=_interopRequireWildcard(require("./selectors/attribute")),_universal=_interopRequireDefault(require("./selectors/universal")),_combinator=_interopRequireDefault(require("./selectors/combinator")),_nesting=_interopRequireDefault(require("./selectors/nesting")),_sortAscending=_interopRequireDefault(require("./sortAscending")),_tokenize=_interopRequireWildcard(require("./tokenize")),tokens=_interopRequireWildcard(require("./tokenTypes")),types=_interopRequireWildcard(require("./selectors/types")),_util=require("./util");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(e){return e?s:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=_getRequireWildcardCache(t);if(s&&s.has(e))return s.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,s&&s.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}var WHITESPACE_TOKENS=((_WHITESPACE_TOKENS={})[tokens.space]=!0,_WHITESPACE_TOKENS[tokens.cr]=!0,_WHITESPACE_TOKENS[tokens.feed]=!0,_WHITESPACE_TOKENS[tokens.newline]=!0,_WHITESPACE_TOKENS[tokens.tab]=!0,_WHITESPACE_TOKENS),WHITESPACE_EQUIV_TOKENS=Object.assign({},WHITESPACE_TOKENS,((_Object$assign={})[tokens.comment]=!0,_Object$assign));function tokenStart(e){return{line:e[_tokenize.FIELDS.START_LINE],column:e[_tokenize.FIELDS.START_COL]}}function tokenEnd(e){return{line:e[_tokenize.FIELDS.END_LINE],column:e[_tokenize.FIELDS.END_COL]}}function getSource(e,t,s,n){return{start:{line:e,column:t},end:{line:s,column:n}}}function getTokenSource(e){return getSource(e[_tokenize.FIELDS.START_LINE],e[_tokenize.FIELDS.START_COL],e[_tokenize.FIELDS.END_LINE],e[_tokenize.FIELDS.END_COL])}function getTokenSourceSpan(e,t){if(e)return getSource(e[_tokenize.FIELDS.START_LINE],e[_tokenize.FIELDS.START_COL],t[_tokenize.FIELDS.END_LINE],t[_tokenize.FIELDS.END_COL])}function unescapeProp(e,t){var s=e[t];if("string"==typeof s)return-1!==s.indexOf("\\")&&((0,_util.ensureObject)(e,"raws"),e[t]=(0,_util.unesc)(s),void 0===e.raws[t]&&(e.raws[t]=s)),e}function indexesOf(e,t){for(var s=-1,n=[];-1!==(s=e.indexOf(t,s+1));)n.push(s);return n}function uniqs(){var e=Array.prototype.concat.apply([],arguments);return e.filter(function(t,s){return s===e.indexOf(t)})}var Parser=function(){function e(e,t){void 0===t&&(t={}),this.rule=e,this.options=Object.assign({lossy:!1,safe:!1},t),this.position=0,this.css="string"==typeof this.rule?this.rule:this.rule.selector,this.tokens=(0,_tokenize.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var s=getTokenSourceSpan(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new _root.default({source:s}),this.root.errorGenerator=this._errorGenerator();var n=new _selector.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(n),this.current=n,this.loop()}var t=e.prototype;return t._errorGenerator=function(){var e=this;return function(t,s){return"string"==typeof e.rule?new Error(t):e.rule.error(t,s)}},t.attribute=function(){var e=[],t=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[_tokenize.FIELDS.TYPE]!==tokens.closeSquare;)e.push(this.currToken),this.position++;if(this.currToken[_tokenize.FIELDS.TYPE]!==tokens.closeSquare)return this.expected("closing square bracket",this.currToken[_tokenize.FIELDS.START_POS]);var s=e.length,n={source:getSource(t[1],t[2],this.currToken[3],this.currToken[4]),sourceIndex:t[_tokenize.FIELDS.START_POS]};if(1===s&&!~[tokens.word].indexOf(e[0][_tokenize.FIELDS.TYPE]))return this.expected("attribute",e[0][_tokenize.FIELDS.START_POS]);for(var r=0,i="",o="",a=null,u=!1;r<s;){var c=e[r],p=this.content(c),h=e[r+1];switch(c[_tokenize.FIELDS.TYPE]){case tokens.space:if(u=!0,this.options.lossy)break;if(a){(0,_util.ensureObject)(n,"spaces",a);var k=n.spaces[a].after||"";n.spaces[a].after=k+p;var l=(0,_util.getProp)(n,"raws","spaces",a,"after")||null;l&&(n.raws.spaces[a].after=l+p)}else i+=p,o+=p;break;case tokens.asterisk:h[_tokenize.FIELDS.TYPE]===tokens.equals?(n.operator=p,a="operator"):n.namespace&&("namespace"!==a||u)||!h||(i&&((0,_util.ensureObject)(n,"spaces","attribute"),n.spaces.attribute.before=i,i=""),o&&((0,_util.ensureObject)(n,"raws","spaces","attribute"),n.raws.spaces.attribute.before=i,o=""),n.namespace=(n.namespace||"")+p,(0,_util.getProp)(n,"raws","namespace")&&(n.raws.namespace+=p),a="namespace"),u=!1;break;case tokens.dollar:if("value"===a){var _=(0,_util.getProp)(n,"raws","value");n.value+="$",_&&(n.raws.value=_+"$");break}case tokens.caret:h[_tokenize.FIELDS.TYPE]===tokens.equals&&(n.operator=p,a="operator"),u=!1;break;case tokens.combinator:if("~"===p&&h[_tokenize.FIELDS.TYPE]===tokens.equals&&(n.operator=p,a="operator"),"|"!==p){u=!1;break}h[_tokenize.FIELDS.TYPE]===tokens.equals?(n.operator=p,a="operator"):n.namespace||n.attribute||(n.namespace=!0),u=!1;break;case tokens.word:if(h&&"|"===this.content(h)&&e[r+2]&&e[r+2][_tokenize.FIELDS.TYPE]!==tokens.equals&&!n.operator&&!n.namespace)n.namespace=p,a="namespace";else if(!n.attribute||"attribute"===a&&!u)i&&((0,_util.ensureObject)(n,"spaces","attribute"),n.spaces.attribute.before=i,i=""),o&&((0,_util.ensureObject)(n,"raws","spaces","attribute"),n.raws.spaces.attribute.before=o,o=""),n.attribute=(n.attribute||"")+p,(0,_util.getProp)(n,"raws","attribute")&&(n.raws.attribute+=p),a="attribute";else if(!n.value&&""!==n.value||"value"===a&&!u&&!n.quoteMark){var S=(0,_util.unesc)(p),T=(0,_util.getProp)(n,"raws","value")||"",f=n.value||"";n.value=f+S,n.quoteMark=null,(S!==p||T)&&((0,_util.ensureObject)(n,"raws"),n.raws.value=(T||f)+p),a="value"}else{var d="i"===p||"I"===p;!n.value&&""!==n.value||!n.quoteMark&&!u?(n.value||""===n.value)&&(a="value",n.value+=p,n.raws.value&&(n.raws.value+=p)):(n.insensitive=d,d&&"I"!==p||((0,_util.ensureObject)(n,"raws"),n.raws.insensitiveFlag=p),a="insensitive",i&&((0,_util.ensureObject)(n,"spaces","insensitive"),n.spaces.insensitive.before=i,i=""),o&&((0,_util.ensureObject)(n,"raws","spaces","insensitive"),n.raws.spaces.insensitive.before=o,o=""))}u=!1;break;case tokens.str:if(!n.attribute||!n.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:c[_tokenize.FIELDS.START_POS]});var E=(0,_attribute.unescapeValue)(p),v=E.unescaped,I=E.quoteMark;n.value=v,n.quoteMark=I,a="value",(0,_util.ensureObject)(n,"raws"),n.raws.value=p,u=!1;break;case tokens.equals:if(!n.attribute)return this.expected("attribute",c[_tokenize.FIELDS.START_POS],p);if(n.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:c[_tokenize.FIELDS.START_POS]});n.operator=n.operator?n.operator+p:p,a="operator",u=!1;break;case tokens.comment:if(a)if(u||h&&h[_tokenize.FIELDS.TYPE]===tokens.space||"insensitive"===a){var P=(0,_util.getProp)(n,"spaces",a,"after")||"",D=(0,_util.getProp)(n,"raws","spaces",a,"after")||P;(0,_util.ensureObject)(n,"raws","spaces",a),n.raws.spaces[a].after=D+p}else{var L=n[a]||"",b=(0,_util.getProp)(n,"raws",a)||L;(0,_util.ensureObject)(n,"raws"),n.raws[a]=b+p}else o+=p;break;default:return this.error('Unexpected "'+p+'" found.',{index:c[_tokenize.FIELDS.START_POS]})}r++}unescapeProp(n,"attribute"),unescapeProp(n,"namespace"),this.newNode(new _attribute.default(n)),this.position++},t.parseWhitespaceEquivalentTokens=function(e){e<0&&(e=this.tokens.length);var t=this.position,s=[],n="",r=void 0;do{if(WHITESPACE_TOKENS[this.currToken[_tokenize.FIELDS.TYPE]])this.options.lossy||(n+=this.content());else if(this.currToken[_tokenize.FIELDS.TYPE]===tokens.comment){var i={};n&&(i.before=n,n=""),r=new _comment.default({value:this.content(),source:getTokenSource(this.currToken),sourceIndex:this.currToken[_tokenize.FIELDS.START_POS],spaces:i}),s.push(r)}}while(++this.position<e);if(n)if(r)r.spaces.after=n;else if(!this.options.lossy){var o=this.tokens[t],a=this.tokens[this.position-1];s.push(new _string.default({value:"",source:getSource(o[_tokenize.FIELDS.START_LINE],o[_tokenize.FIELDS.START_COL],a[_tokenize.FIELDS.END_LINE],a[_tokenize.FIELDS.END_COL]),sourceIndex:o[_tokenize.FIELDS.START_POS],spaces:{before:n,after:""}}))}return s},t.convertWhitespaceNodesToSpace=function(e,t){var s=this;void 0===t&&(t=!1);var n="",r="";return e.forEach(function(e){var i=s.lossySpace(e.spaces.before,t),o=s.lossySpace(e.rawSpaceBefore,t);n+=i+s.lossySpace(e.spaces.after,t&&0===i.length),r+=i+e.value+s.lossySpace(e.rawSpaceAfter,t&&0===o.length)}),r===n&&(r=void 0),{space:n,rawSpace:r}},t.isNamedCombinator=function(e){return void 0===e&&(e=this.position),this.tokens[e+0]&&this.tokens[e+0][_tokenize.FIELDS.TYPE]===tokens.slash&&this.tokens[e+1]&&this.tokens[e+1][_tokenize.FIELDS.TYPE]===tokens.word&&this.tokens[e+2]&&this.tokens[e+2][_tokenize.FIELDS.TYPE]===tokens.slash},t.namedCombinator=function(){if(this.isNamedCombinator()){var e=this.content(this.tokens[this.position+1]),t=(0,_util.unesc)(e).toLowerCase(),s={};t!==e&&(s.value="/"+e+"/");var n=new _combinator.default({value:"/"+t+"/",source:getSource(this.currToken[_tokenize.FIELDS.START_LINE],this.currToken[_tokenize.FIELDS.START_COL],this.tokens[this.position+2][_tokenize.FIELDS.END_LINE],this.tokens[this.position+2][_tokenize.FIELDS.END_COL]),sourceIndex:this.currToken[_tokenize.FIELDS.START_POS],raws:s});return this.position=this.position+3,n}this.unexpected()},t.combinator=function(){var e=this;if("|"===this.content())return this.namespace();var t=this.locateNextMeaningfulToken(this.position);if(!(t<0||this.tokens[t][_tokenize.FIELDS.TYPE]===tokens.comma||this.tokens[t][_tokenize.FIELDS.TYPE]===tokens.closeParenthesis)){var s,n=this.currToken,r=void 0;if(t>this.position&&(r=this.parseWhitespaceEquivalentTokens(t)),this.isNamedCombinator()?s=this.namedCombinator():this.currToken[_tokenize.FIELDS.TYPE]===tokens.combinator?(s=new _combinator.default({value:this.content(),source:getTokenSource(this.currToken),sourceIndex:this.currToken[_tokenize.FIELDS.START_POS]}),this.position++):WHITESPACE_TOKENS[this.currToken[_tokenize.FIELDS.TYPE]]||r||this.unexpected(),s){if(r){var i=this.convertWhitespaceNodesToSpace(r),o=i.space,a=i.rawSpace;s.spaces.before=o,s.rawSpaceBefore=a}}else{var u=this.convertWhitespaceNodesToSpace(r,!0),c=u.space,p=u.rawSpace;p||(p=c);var h={},k={spaces:{}};c.endsWith(" ")&&p.endsWith(" ")?(h.before=c.slice(0,c.length-1),k.spaces.before=p.slice(0,p.length-1)):c.startsWith(" ")&&p.startsWith(" ")?(h.after=c.slice(1),k.spaces.after=p.slice(1)):k.value=p,s=new _combinator.default({value:" ",source:getTokenSourceSpan(n,this.tokens[this.position-1]),sourceIndex:n[_tokenize.FIELDS.START_POS],spaces:h,raws:k})}return this.currToken&&this.currToken[_tokenize.FIELDS.TYPE]===tokens.space&&(s.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(s)}var l=this.parseWhitespaceEquivalentTokens(t);if(l.length>0){var _=this.current.last;if(_){var S=this.convertWhitespaceNodesToSpace(l),T=S.space,f=S.rawSpace;void 0!==f&&(_.rawSpaceAfter+=f),_.spaces.after+=T}else l.forEach(function(t){return e.newNode(t)})}},t.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var e=new _selector.default({source:{start:tokenStart(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][_tokenize.FIELDS.START_POS]});this.current.parent.append(e),this.current=e,this.position++},t.comment=function(){var e=this.currToken;this.newNode(new _comment.default({value:this.content(),source:getTokenSource(e),sourceIndex:e[_tokenize.FIELDS.START_POS]})),this.position++},t.error=function(e,t){throw this.root.error(e,t)},t.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[_tokenize.FIELDS.START_POS]})},t.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[_tokenize.FIELDS.START_POS])},t.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[_tokenize.FIELDS.START_POS])},t.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[_tokenize.FIELDS.START_POS])},t.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[_tokenize.FIELDS.START_POS])},t.namespace=function(){var e=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[_tokenize.FIELDS.TYPE]===tokens.word?(this.position++,this.word(e)):this.nextToken[_tokenize.FIELDS.TYPE]===tokens.asterisk?(this.position++,this.universal(e)):void this.unexpectedPipe()},t.nesting=function(){if(this.nextToken&&"|"===this.content(this.nextToken))this.position++;else{var e=this.currToken;this.newNode(new _nesting.default({value:this.content(),source:getTokenSource(e),sourceIndex:e[_tokenize.FIELDS.START_POS]})),this.position++}},t.parentheses=function(){var e=this.current.last,t=1;if(this.position++,e&&e.type===types.PSEUDO){var s=new _selector.default({source:{start:tokenStart(this.tokens[this.position])},sourceIndex:this.tokens[this.position][_tokenize.FIELDS.START_POS]}),n=this.current;for(e.append(s),this.current=s;this.position<this.tokens.length&&t;)this.currToken[_tokenize.FIELDS.TYPE]===tokens.openParenthesis&&t++,this.currToken[_tokenize.FIELDS.TYPE]===tokens.closeParenthesis&&t--,t?this.parse():(this.current.source.end=tokenEnd(this.currToken),this.current.parent.source.end=tokenEnd(this.currToken),this.position++);this.current=n}else{for(var r,i=this.currToken,o="(";this.position<this.tokens.length&&t;)this.currToken[_tokenize.FIELDS.TYPE]===tokens.openParenthesis&&t++,this.currToken[_tokenize.FIELDS.TYPE]===tokens.closeParenthesis&&t--,r=this.currToken,o+=this.parseParenthesisToken(this.currToken),this.position++;e?e.appendToPropertyAndEscape("value",o,o):this.newNode(new _string.default({value:o,source:getSource(i[_tokenize.FIELDS.START_LINE],i[_tokenize.FIELDS.START_COL],r[_tokenize.FIELDS.END_LINE],r[_tokenize.FIELDS.END_COL]),sourceIndex:i[_tokenize.FIELDS.START_POS]}))}if(t)return this.expected("closing parenthesis",this.currToken[_tokenize.FIELDS.START_POS])},t.pseudo=function(){for(var e=this,t="",s=this.currToken;this.currToken&&this.currToken[_tokenize.FIELDS.TYPE]===tokens.colon;)t+=this.content(),this.position++;return this.currToken?this.currToken[_tokenize.FIELDS.TYPE]!==tokens.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[_tokenize.FIELDS.START_POS]):void this.splitWord(!1,function(n,r){t+=n,e.newNode(new _pseudo.default({value:t,source:getTokenSourceSpan(s,e.currToken),sourceIndex:s[_tokenize.FIELDS.START_POS]})),r>1&&e.nextToken&&e.nextToken[_tokenize.FIELDS.TYPE]===tokens.openParenthesis&&e.error("Misplaced parenthesis.",{index:e.nextToken[_tokenize.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},t.space=function(){var e=this.content();0===this.position||this.prevToken[_tokenize.FIELDS.TYPE]===tokens.comma||this.prevToken[_tokenize.FIELDS.TYPE]===tokens.openParenthesis||this.current.nodes.every(function(e){return"comment"===e.type})?(this.spaces=this.optionalSpace(e),this.position++):this.position===this.tokens.length-1||this.nextToken[_tokenize.FIELDS.TYPE]===tokens.comma||this.nextToken[_tokenize.FIELDS.TYPE]===tokens.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(e),this.position++):this.combinator()},t.string=function(){var e=this.currToken;this.newNode(new _string.default({value:this.content(),source:getTokenSource(e),sourceIndex:e[_tokenize.FIELDS.START_POS]})),this.position++},t.universal=function(e){var t=this.nextToken;if(t&&"|"===this.content(t))return this.position++,this.namespace();var s=this.currToken;this.newNode(new _universal.default({value:this.content(),source:getTokenSource(s),sourceIndex:s[_tokenize.FIELDS.START_POS]}),e),this.position++},t.splitWord=function(e,t){for(var s=this,n=this.nextToken,r=this.content();n&&~[tokens.dollar,tokens.caret,tokens.equals,tokens.word].indexOf(n[_tokenize.FIELDS.TYPE]);){this.position++;var i=this.content();if(r+=i,i.lastIndexOf("\\")===i.length-1){var o=this.nextToken;o&&o[_tokenize.FIELDS.TYPE]===tokens.space&&(r+=this.requiredSpace(this.content(o)),this.position++)}n=this.nextToken}var a=indexesOf(r,".").filter(function(e){var t="\\"===r[e-1],s=/^\d+\.\d+%$/.test(r);return!t&&!s}),u=indexesOf(r,"#").filter(function(e){return"\\"!==r[e-1]}),c=indexesOf(r,"#{");c.length&&(u=u.filter(function(e){return!~c.indexOf(e)}));var p=(0,_sortAscending.default)(uniqs([0].concat(a,u)));p.forEach(function(n,i){var o,c=p[i+1]||r.length,h=r.slice(n,c);if(0===i&&t)return t.call(s,h,p.length);var k=s.currToken,l=k[_tokenize.FIELDS.START_POS]+p[i],_=getSource(k[1],k[2]+n,k[3],k[2]+(c-1));if(~a.indexOf(n)){var S={value:h.slice(1),source:_,sourceIndex:l};o=new _className.default(unescapeProp(S,"value"))}else if(~u.indexOf(n)){var T={value:h.slice(1),source:_,sourceIndex:l};o=new _id.default(unescapeProp(T,"value"))}else{var f={value:h,source:_,sourceIndex:l};unescapeProp(f,"value"),o=new _tag.default(f)}s.newNode(o,e),e=null}),this.position++},t.word=function(e){var t=this.nextToken;return t&&"|"===this.content(t)?(this.position++,this.namespace()):this.splitWord(e)},t.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},t.parse=function(e){switch(this.currToken[_tokenize.FIELDS.TYPE]){case tokens.space:this.space();break;case tokens.comment:this.comment();break;case tokens.openParenthesis:this.parentheses();break;case tokens.closeParenthesis:e&&this.missingParenthesis();break;case tokens.openSquare:this.attribute();break;case tokens.dollar:case tokens.caret:case tokens.equals:case tokens.word:this.word();break;case tokens.colon:this.pseudo();break;case tokens.comma:this.comma();break;case tokens.asterisk:this.universal();break;case tokens.ampersand:this.nesting();break;case tokens.slash:case tokens.combinator:this.combinator();break;case tokens.str:this.string();break;case tokens.closeSquare:this.missingSquareBracket();case tokens.semicolon:this.missingBackslash();default:this.unexpected()}},t.expected=function(e,t,s){if(Array.isArray(e)){var n=e.pop();e=e.join(", ")+" or "+n}var r=/^[aeiou]/.test(e[0])?"an":"a";return s?this.error("Expected "+r+" "+e+', found "'+s+'" instead.',{index:t}):this.error("Expected "+r+" "+e+".",{index:t})},t.requiredSpace=function(e){return this.options.lossy?" ":e},t.optionalSpace=function(e){return this.options.lossy?"":e},t.lossySpace=function(e,t){return this.options.lossy?t?" ":"":e},t.parseParenthesisToken=function(e){var t=this.content(e);return e[_tokenize.FIELDS.TYPE]===tokens.space?this.requiredSpace(t):t},t.newNode=function(e,t){return t&&(/^ +$/.test(t)&&(this.options.lossy||(this.spaces=(this.spaces||"")+t),t=!0),e.namespace=t,unescapeProp(e,"namespace")),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},t.content=function(e){return void 0===e&&(e=this.currToken),this.css.slice(e[_tokenize.FIELDS.START_POS],e[_tokenize.FIELDS.END_POS])},t.locateNextMeaningfulToken=function(e){void 0===e&&(e=this.position+1);for(var t=e;t<this.tokens.length;){if(!WHITESPACE_EQUIV_TOKENS[this.tokens[t][_tokenize.FIELDS.TYPE]])return t;t++}return-1},_createClass(e,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),e}();exports.default=Parser,module.exports=exports.default;