"use strict";exports.__esModule=!0,exports.default=void 0;var _node=_interopRequireDefault(require("./node")),types=_interopRequireWildcard(require("./types"));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:e})(t)}function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=_getRequireWildcardCache(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _createForOfIteratorHelperLoose(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var Container=function(t){function e(e){var r;return(r=t.call(this,e)||this).nodes||(r.nodes=[]),r}_inheritsLoose(e,t);var r=e.prototype;return r.append=function(t){return t.parent=this,this.nodes.push(t),this},r.prepend=function(t){return t.parent=this,this.nodes.unshift(t),this},r.at=function(t){return this.nodes[t]},r.index=function(t){return"number"==typeof t?t:this.nodes.indexOf(t)},r.removeChild=function(t){var e;for(var r in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(e=this.indexes[r])>=t&&(this.indexes[r]=e-1);return this},r.removeAll=function(){for(var t,e=_createForOfIteratorHelperLoose(this.nodes);!(t=e()).done;){t.value.parent=void 0}return this.nodes=[],this},r.empty=function(){return this.removeAll()},r.insertAfter=function(t,e){e.parent=this;var r,n=this.index(t);for(var i in this.nodes.splice(n+1,0,e),e.parent=this,this.indexes)n<=(r=this.indexes[i])&&(this.indexes[i]=r+1);return this},r.insertBefore=function(t,e){e.parent=this;var r,n=this.index(t);for(var i in this.nodes.splice(n,0,e),e.parent=this,this.indexes)(r=this.indexes[i])<=n&&(this.indexes[i]=r+1);return this},r._findChildAtPosition=function(t,e){var r=void 0;return this.each(function(n){if(n.atPosition){var i=n.atPosition(t,e);if(i)return r=i,!1}else if(n.isAtPosition(t,e))return r=n,!1}),r},r.atPosition=function(t,e){return this.isAtPosition(t,e)?this._findChildAtPosition(t,e)||this:void 0},r._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},r.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var e=this.lastEach;if(this.indexes[e]=0,this.length){for(var r,n;this.indexes[e]<this.length&&(r=this.indexes[e],!1!==(n=t(this.at(r),r)));)this.indexes[e]+=1;return delete this.indexes[e],!1!==n&&void 0}},r.walk=function(t){return this.each(function(e,r){var n=t(e,r);if(!1!==n&&e.length&&(n=e.walk(t)),!1===n)return!1})},r.walkAttributes=function(t){var e=this;return this.walk(function(r){if(r.type===types.ATTRIBUTE)return t.call(e,r)})},r.walkClasses=function(t){var e=this;return this.walk(function(r){if(r.type===types.CLASS)return t.call(e,r)})},r.walkCombinators=function(t){var e=this;return this.walk(function(r){if(r.type===types.COMBINATOR)return t.call(e,r)})},r.walkComments=function(t){var e=this;return this.walk(function(r){if(r.type===types.COMMENT)return t.call(e,r)})},r.walkIds=function(t){var e=this;return this.walk(function(r){if(r.type===types.ID)return t.call(e,r)})},r.walkNesting=function(t){var e=this;return this.walk(function(r){if(r.type===types.NESTING)return t.call(e,r)})},r.walkPseudos=function(t){var e=this;return this.walk(function(r){if(r.type===types.PSEUDO)return t.call(e,r)})},r.walkTags=function(t){var e=this;return this.walk(function(r){if(r.type===types.TAG)return t.call(e,r)})},r.walkUniversals=function(t){var e=this;return this.walk(function(r){if(r.type===types.UNIVERSAL)return t.call(e,r)})},r.split=function(t){var e=this,r=[];return this.reduce(function(n,i,o){var s=t.call(e,i);return r.push(i),s?(n.push(r),r=[]):o===e.length-1&&n.push(r),n},[])},r.map=function(t){return this.nodes.map(t)},r.reduce=function(t,e){return this.nodes.reduce(t,e)},r.every=function(t){return this.nodes.every(t)},r.some=function(t){return this.nodes.some(t)},r.filter=function(t){return this.nodes.filter(t)},r.sort=function(t){return this.nodes.sort(t)},r.toString=function(){return this.map(String).join("")},_createClass(e,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),e}(_node.default);exports.default=Container,module.exports=exports.default;