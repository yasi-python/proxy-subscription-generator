"use strict";const fill=require("fill-range"),utils=require("./utils"),compile=(e,l={})=>{const r=(e,t={})=>{const i=utils.isInvalidBrace(t),n=!0===e.invalid&&!0===l.escapeInvalid,s=!0===i||!0===n,o=!0===l.escapeInvalid?"\\":"";let u="";if(!0===e.isOpen)return o+e.value;if(!0===e.isClose)return console.log("node.isClose",o,e.value),o+e.value;if("open"===e.type)return s?o+e.value:"(";if("close"===e.type)return s?o+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){const r=utils.reduce(e.nodes),t=fill(...r,{...l,wrap:!1,toRegex:!0,strictZeros:!0});if(0!==t.length)return r.length>1&&t.length>1?`(${t})`:t}if(e.nodes)for(const l of e.nodes)u+=r(l,e);return u};return r(e)};module.exports=compile;