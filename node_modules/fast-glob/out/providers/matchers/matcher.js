"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const utils=require("../../utils");class Matcher{constructor(t,e,s){this._patterns=t,this._settings=e,this._micromatchOptions=s,this._storage=[],this._fillStorage()}_fillStorage(){for(const t of this._patterns){const e=this._getPatternSegments(t),s=this._splitSegmentsIntoSections(e);this._storage.push({complete:s.length<=1,pattern:t,segments:e,sections:s})}}_getPatternSegments(t){return utils.pattern.getPatternParts(t,this._micromatchOptions).map(t=>utils.pattern.isDynamicPattern(t,this._settings)?{dynamic:!0,pattern:t,patternRe:utils.pattern.makeRe(t,this._micromatchOptions)}:{dynamic:!1,pattern:t})}_splitSegmentsIntoSections(t){return utils.array.splitWhen(t,t=>t.dynamic&&utils.pattern.hasGlobStar(t.pattern))}}exports.default=Matcher;