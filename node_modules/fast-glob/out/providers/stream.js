"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const stream_1=require("stream"),stream_2=require("../readers/stream"),provider_1=require("./provider");class ProviderStream extends provider_1.default{constructor(){super(...arguments),this._reader=new stream_2.default(this._settings)}read(e){const r=this._getRootDirectory(e),t=this._getReaderOptions(e),s=this.api(r,e,t),a=new stream_1.Readable({objectMode:!0,read:()=>{}});return s.once("error",e=>a.emit("error",e)).on("data",e=>a.emit("data",t.transform(e))).once("end",()=>a.emit("end")),a.once("close",()=>s.destroy()),a}api(e,r,t){return r.dynamic?this._reader.dynamic(e,t):this._reader.static(r.patterns,t)}}exports.default=ProviderStream;