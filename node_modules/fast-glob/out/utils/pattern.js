"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAbsolute=exports.partitionAbsoluteAndRelative=exports.removeDuplicateSlashes=exports.matchAny=exports.convertPatternsToRe=exports.makeRe=exports.getPatternParts=exports.expandBraceExpansion=exports.expandPatternsWithBraceExpansion=exports.isAffectDepthOfReadingPattern=exports.endsWithSlashGlobStar=exports.hasGlobStar=exports.getBaseDirectory=exports.isPatternRelatedToParentDirectory=exports.getPatternsOutsideCurrentDirectory=exports.getPatternsInsideCurrentDirectory=exports.getPositivePatterns=exports.getNegativePatterns=exports.isPositivePattern=exports.isNegativePattern=exports.convertToNegativePattern=exports.convertToPositivePattern=exports.isDynamicPattern=exports.isStaticPattern=void 0;const path=require("path"),globParent=require("glob-parent"),micromatch=require("micromatch"),GLOBSTAR="**",ESCAPE_SYMBOL="\\",COMMON_GLOB_SYMBOLS_RE=/[*?]|^!/,REGEX_CHARACTER_CLASS_SYMBOLS_RE=/\[[^[]*]/,REGEX_GROUP_SYMBOLS_RE=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,GLOB_EXTENSION_SYMBOLS_RE=/[!*+?@]\([^(]*\)/,BRACE_EXPANSION_SEPARATORS_RE=/,|\.\./,DOUBLE_SLASH_RE=/(?!^)\/{2,}/g;function isStaticPattern(t,e={}){return!isDynamicPattern(t,e)}function isDynamicPattern(t,e={}){return!!(""!==t&&(!1===e.caseSensitiveMatch||t.includes("\\")||COMMON_GLOB_SYMBOLS_RE.test(t)||REGEX_CHARACTER_CLASS_SYMBOLS_RE.test(t)||REGEX_GROUP_SYMBOLS_RE.test(t)||!1!==e.extglob&&GLOB_EXTENSION_SYMBOLS_RE.test(t)||!1!==e.braceExpansion&&hasBraceExpansion(t)))}function hasBraceExpansion(t){const e=t.indexOf("{");if(-1===e)return!1;const r=t.indexOf("}",e+1);if(-1===r)return!1;const n=t.slice(e,r);return BRACE_EXPANSION_SEPARATORS_RE.test(n)}function convertToPositivePattern(t){return isNegativePattern(t)?t.slice(1):t}function convertToNegativePattern(t){return"!"+t}function isNegativePattern(t){return t.startsWith("!")&&"("!==t[1]}function isPositivePattern(t){return!isNegativePattern(t)}function getNegativePatterns(t){return t.filter(isNegativePattern)}function getPositivePatterns(t){return t.filter(isPositivePattern)}function getPatternsInsideCurrentDirectory(t){return t.filter(t=>!isPatternRelatedToParentDirectory(t))}function getPatternsOutsideCurrentDirectory(t){return t.filter(isPatternRelatedToParentDirectory)}function isPatternRelatedToParentDirectory(t){return t.startsWith("..")||t.startsWith("./..")}function getBaseDirectory(t){return globParent(t,{flipBackslashes:!1})}function hasGlobStar(t){return t.includes("**")}function endsWithSlashGlobStar(t){return t.endsWith("/**")}function isAffectDepthOfReadingPattern(t){const e=path.basename(t);return endsWithSlashGlobStar(t)||isStaticPattern(e)}function expandPatternsWithBraceExpansion(t){return t.reduce((t,e)=>t.concat(expandBraceExpansion(e)),[])}function expandBraceExpansion(t){const e=micromatch.braces(t,{expand:!0,nodupes:!0,keepEscaping:!0});return e.sort((t,e)=>t.length-e.length),e.filter(t=>""!==t)}function getPatternParts(t,e){let{parts:r}=micromatch.scan(t,Object.assign(Object.assign({},e),{parts:!0}));return 0===r.length&&(r=[t]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}function makeRe(t,e){return micromatch.makeRe(t,e)}function convertPatternsToRe(t,e){return t.map(t=>makeRe(t,e))}function matchAny(t,e){return e.some(e=>e.test(t))}function removeDuplicateSlashes(t){return t.replace(DOUBLE_SLASH_RE,"/")}function partitionAbsoluteAndRelative(t){const e=[],r=[];for(const n of t)isAbsolute(n)?e.push(n):r.push(n);return[e,r]}function isAbsolute(t){return path.isAbsolute(t)}exports.isStaticPattern=isStaticPattern,exports.isDynamicPattern=isDynamicPattern,exports.convertToPositivePattern=convertToPositivePattern,exports.convertToNegativePattern=convertToNegativePattern,exports.isNegativePattern=isNegativePattern,exports.isPositivePattern=isPositivePattern,exports.getNegativePatterns=getNegativePatterns,exports.getPositivePatterns=getPositivePatterns,exports.getPatternsInsideCurrentDirectory=getPatternsInsideCurrentDirectory,exports.getPatternsOutsideCurrentDirectory=getPatternsOutsideCurrentDirectory,exports.isPatternRelatedToParentDirectory=isPatternRelatedToParentDirectory,exports.getBaseDirectory=getBaseDirectory,exports.hasGlobStar=hasGlobStar,exports.endsWithSlashGlobStar=endsWithSlashGlobStar,exports.isAffectDepthOfReadingPattern=isAffectDepthOfReadingPattern,exports.expandPatternsWithBraceExpansion=expandPatternsWithBraceExpansion,exports.expandBraceExpansion=expandBraceExpansion,exports.getPatternParts=getPatternParts,exports.makeRe=makeRe,exports.convertPatternsToRe=convertPatternsToRe,exports.matchAny=matchAny,exports.removeDuplicateSlashes=removeDuplicateSlashes,exports.partitionAbsoluteAndRelative=partitionAbsoluteAndRelative,exports.isAbsolute=isAbsolute;