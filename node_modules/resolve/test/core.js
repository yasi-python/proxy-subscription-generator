var test=require("tape"),keys=require("object-keys"),semver=require("semver"),resolve=require("../"),brokenNode=semver.satisfies(process.version,"11.11 - 11.13");test("core modules",function(e){e.test("isCore()",function(e){e.ok(resolve.isCore("fs")),e.ok(resolve.isCore("net")),e.ok(resolve.isCore("http")),e.ok(!resolve.isCore("seq")),e.ok(!resolve.isCore("../")),e.ok(!resolve.isCore("toString")),e.end()}),e.test("core list",function(o){var r=keys(resolve.core);o.plan(r.length);for(var s=0;s<r.length;++s){var t=r[s],i=function(){require(t)};e.comment(t+": "+resolve.core[t]),resolve.core[t]?o.doesNotThrow(i,t+" supported; requiring does not throw"):brokenNode?o.ok(!0,'this version of node is broken: attempting to require things that fail to resolve breaks "home_paths" tests'):o.throws(i,t+" not supported; requiring throws")}o.end()}),e.test("core via repl module",{skip:!resolve.core.repl},function(e){var o=require("repl")._builtinLibs;if(!o)return e.skip("module.builtinModules does not exist"),e.end();for(var r=0;r<o.length;++r){var s=o[r];e.ok(resolve.core[s],s+" is a core module"),e.doesNotThrow(function(){require(s)},"requiring "+s+" does not throw")}e.end()}),e.test("core via builtinModules list",{skip:!resolve.core.module},function(e){var o=require("module").builtinModules;if(!o)return e.skip("module.builtinModules does not exist"),e.end();for(var r=["_debug_agent","v8/tools/tickprocessor-driver","v8/tools/SourceMap","v8/tools/tickprocessor","v8/tools/profile"],s=0;s<o.length;++s){var t=o[s];-1===r.indexOf(t)&&(e.ok(resolve.core[t],t+" is a core module"),e.doesNotThrow(function(){require(t)},"requiring "+t+" does not throw"))}e.end()}),e.end()});