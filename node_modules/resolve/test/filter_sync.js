var path=require("path"),test=require("tape"),resolve=require("../");test("filter",function(a){var e,r=path.join(__dirname,"resolver"),i=resolve.sync("./baz",{basedir:r,packageFilter:function(a,r){return a.main="doom",e=[a,r],a}});a.equal(i,path.join(r,"baz/doom.js"),'changing the package "main" works');var n=e[0];a.equal(n.main,"doom",'package "main" was altered');var t=e[1];a.equal(t,path.join(r,"baz"),'second packageFilter argument is "dir"'),a.end()});