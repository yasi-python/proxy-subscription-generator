var path=require("path"),test=require("tape"),resolve=require("../");test("filter",function(a){a.plan(4);var e,r=path.join(__dirname,"resolver");resolve("./baz",{basedir:r,packageFilter:function(a,r){return a.main="doom",e=[a,r],a}},function(i,n,t){i&&a.fail(i),a.equal(n,path.join(r,"baz/doom.js"),'changing the package "main" works');var o=e[0];a.equal(t,o,'first packageFilter argument is "pkg"'),a.equal(o.main,"doom",'package "main" was altered');var l=e[1];a.equal(l,path.join(r,"baz/package.json"),'second packageFilter argument is "pkgfile"'),a.end()})});