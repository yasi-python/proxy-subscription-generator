var test=require("tape"),resolve=require("../"),path=require("path");test("shadowed core modules still return core module",function(e){e.plan(2),resolve("util",{basedir:path.join(__dirname,"shadowed_core")},function(o,d){e.ifError(o),e.equal(d,"util")})}),test("shadowed core modules still return core module [sync]",function(e){e.plan(1);var o=resolve.sync("util",{basedir:path.join(__dirname,"shadowed_core")});e.equal(o,"util")}),test("shadowed core modules return shadow when appending `/`",function(e){e.plan(2),resolve("util/",{basedir:path.join(__dirname,"shadowed_core")},function(o,d){e.ifError(o),e.equal(d,path.join(__dirname,"shadowed_core/node_modules/util/index.js"))})}),test("shadowed core modules return shadow when appending `/` [sync]",function(e){e.plan(1);var o=resolve.sync("util/",{basedir:path.join(__dirname,"shadowed_core")});e.equal(o,path.join(__dirname,"shadowed_core/node_modules/util/index.js"))}),test("shadowed core modules return shadow with `includeCoreModules: false`",function(e){e.plan(2),resolve("util",{basedir:path.join(__dirname,"shadowed_core"),includeCoreModules:!1},function(o,d){e.ifError(o),e.equal(d,path.join(__dirname,"shadowed_core/node_modules/util/index.js"))})}),test("shadowed core modules return shadow with `includeCoreModules: false` [sync]",function(e){e.plan(1);var o=resolve.sync("util",{basedir:path.join(__dirname,"shadowed_core"),includeCoreModules:!1});e.equal(o,path.join(__dirname,"shadowed_core/node_modules/util/index.js"))});