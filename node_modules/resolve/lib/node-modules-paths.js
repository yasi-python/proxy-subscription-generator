var path=require("path"),parse=path.parse||require("path-parse"),getNodeModulesDirs=function(e,r){var t="/";/^([A-Za-z]:)/.test(e)?t="":/^\\\\/.test(e)&&(t="\\\\");for(var o=[e],a=parse(e);a.dir!==o[o.length-1];)o.push(a.dir),a=parse(a.dir);return o.reduce(function(e,o){return e.concat(r.map(function(e){return path.resolve(t,o,e)}))},[])};module.exports=function(e,r,t){var o=r&&r.moduleDirectory?[].concat(r.moduleDirectory):["node_modules"];if(r&&"function"==typeof r.paths)return r.paths(t,e,function(){return getNodeModulesDirs(e,o)},r);var a=getNodeModulesDirs(e,o);return r&&r.paths?a.concat(r.paths):a};