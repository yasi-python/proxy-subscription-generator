"use strict";var isGlob=require("is-glob"),pathPosixDirname=require("path").posix.dirname,isWin32="win32"===require("os").platform(),slash="/",backslash=/\\/g,enclosure=/[\{\[].*[\}\]]$/,globby=/(^|[^\\])([\{\[]|\([^\)]+$)/,escaped=/\\([\!\*\?\|\[\]\(\)\{\}])/g;module.exports=function(s,e){Object.assign({flipBackslashes:!0},e).flipBackslashes&&isWin32&&s.indexOf(slash)<0&&(s=s.replace(backslash,slash)),enclosure.test(s)&&(s+=slash),s+="a";do{s=pathPosixDirname(s)}while(isGlob(s)||globby.test(s));return s.replace(escaped,"$1")};