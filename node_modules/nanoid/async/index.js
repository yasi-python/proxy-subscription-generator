import crypto from"crypto";import{urlAlphabet}from"../url-alphabet/index.js";let random=r=>new Promise((t,e)=>{crypto.randomFill(Buffer.allocUnsafe(r),(r,l)=>{r?e(r):t(l)})}),customAlphabet=(r,t=21)=>{let e=(2<<31-Math.clz32(r.length-1|1))-1,l=Math.ceil(1.6*e*t/r.length),n=(o,a=t)=>random(l).then(t=>{let h=l;for(;h--;)if((o+=r[t[h]&e]||"").length>=a)return o;return n(o,a)});return r=>n("",r)},nanoid=(r=21)=>random(r|=0).then(t=>{let e="";for(;r--;)e+=urlAlphabet[63&t[r]];return e});export{nanoid,customAlphabet,random};