"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const stream_1=require("stream"),async_1=require("../readers/async");class StreamProvider{constructor(e,r){this._root=e,this._settings=r,this._reader=new async_1.default(this._root,this._settings),this._stream=new stream_1.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(e=>{this._stream.emit("error",e)}),this._reader.onEntry(e=>{this._stream.push(e)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}}exports.default=StreamProvider;