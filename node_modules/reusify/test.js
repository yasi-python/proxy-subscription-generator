"use strict";var test=require("tape"),reusify=require("./");test("reuse objects",function(e){e.plan(6);var t=reusify(function(){e.pass("constructor called"),this.next=null}),n=t.get();e.notEqual(n,t.get(),"two instance created"),e.notOk(n.next,"next must be null"),t.release(n),t.release(t.get()),e.equal(n,t.get(),"instance must be reused")}),test("reuse more than 2 objects",function(e){var t=reusify(function(){e.pass("constructor called"),this.next=null}),n=t.get(),u=t.get(),s=t.get();e.notOk(n.next,"next must be null"),e.notOk(u.next,"next must be null"),e.notOk(s.next,"next must be null"),e.notEqual(n,u),e.notEqual(n,s),e.notEqual(s,u),t.release(n),t.release(u),t.release(s),t.get();var l=t.get(),a=t.get(),r=t.get();e.equal(l,n),e.equal(a,u),e.equal(r,s),e.end()});