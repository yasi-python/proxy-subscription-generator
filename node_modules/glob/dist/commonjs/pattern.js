"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pattern=void 0;const minimatch_1=require("minimatch"),isPatternList=t=>t.length>=1,isGlobList=t=>t.length>=1;class Pattern{#t;#s;#i;length;#h;#e;#r;#n;#o;#l;#a=!0;constructor(t,s,i,h){if(!isPatternList(t))throw new TypeError("empty pattern list");if(!isGlobList(s))throw new TypeError("empty glob list");if(s.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#s=s,this.#i=i,this.#h=h,0===this.#i)if(this.isUNC()){const[t,s,i,h,...e]=this.#t,[r,n,o,l,...a]=this.#s;""===e[0]&&(e.shift(),a.shift());const g=[t,s,i,h,""].join("/"),u=[r,n,o,l,""].join("/");this.#t=[g,...e],this.#s=[u,...a],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){const[t,...s]=this.#t,[i,...h]=this.#s;""===s[0]&&(s.shift(),h.shift());const e=t+"/",r=i+"/";this.#t=[e,...s],this.#s=[r,...h],this.length=this.#t.length}}pattern(){return this.#t[this.#i]}isString(){return"string"==typeof this.#t[this.#i]}isGlobstar(){return this.#t[this.#i]===minimatch_1.GLOBSTAR}isRegExp(){return this.#t[this.#i]instanceof RegExp}globString(){return this.#r=this.#r||(0===this.#i?this.isAbsolute()?this.#s[0]+this.#s.slice(1).join("/"):this.#s.join("/"):this.#s.slice(this.#i).join("/"))}hasMore(){return this.length>this.#i+1}rest(){return void 0!==this.#e?this.#e:this.hasMore()?(this.#e=new Pattern(this.#t,this.#s,this.#i+1,this.#h),this.#e.#l=this.#l,this.#e.#o=this.#o,this.#e.#n=this.#n,this.#e):this.#e=null}isUNC(){const t=this.#t;return void 0!==this.#o?this.#o:this.#o="win32"===this.#h&&0===this.#i&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#t;return void 0!==this.#n?this.#n:this.#n="win32"===this.#h&&0===this.#i&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#t;return void 0!==this.#l?this.#l:this.#l=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#t[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#i?t:""}checkFollowGlobstar(){return!(0===this.#i||!this.isGlobstar()||!this.#a)}markFollowGlobstar(){return!(0===this.#i||!this.isGlobstar()||!this.#a||(this.#a=!1,0))}}exports.Pattern=Pattern;