import{GLOBSTAR}from"minimatch";const isPatternList=t=>t.length>=1,isGlobList=t=>t.length>=1;export class Pattern{#t;#i;#s;length;#e;#r;#h;#n;#o;#l;#a=!0;constructor(t,i,s,e){if(!isPatternList(t))throw new TypeError("empty pattern list");if(!isGlobList(i))throw new TypeError("empty glob list");if(i.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#i=i,this.#s=s,this.#e=e,0===this.#s)if(this.isUNC()){const[t,i,s,e,...r]=this.#t,[h,n,o,l,...a]=this.#i;""===r[0]&&(r.shift(),a.shift());const g=[t,i,s,e,""].join("/"),p=[h,n,o,l,""].join("/");this.#t=[g,...r],this.#i=[p,...a],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){const[t,...i]=this.#t,[s,...e]=this.#i;""===i[0]&&(i.shift(),e.shift());const r=t+"/",h=s+"/";this.#t=[r,...i],this.#i=[h,...e],this.length=this.#t.length}}pattern(){return this.#t[this.#s]}isString(){return"string"==typeof this.#t[this.#s]}isGlobstar(){return this.#t[this.#s]===GLOBSTAR}isRegExp(){return this.#t[this.#s]instanceof RegExp}globString(){return this.#h=this.#h||(0===this.#s?this.isAbsolute()?this.#i[0]+this.#i.slice(1).join("/"):this.#i.join("/"):this.#i.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return void 0!==this.#r?this.#r:this.hasMore()?(this.#r=new Pattern(this.#t,this.#i,this.#s+1,this.#e),this.#r.#l=this.#l,this.#r.#o=this.#o,this.#r.#n=this.#n,this.#r):this.#r=null}isUNC(){const t=this.#t;return void 0!==this.#o?this.#o:this.#o="win32"===this.#e&&0===this.#s&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#t;return void 0!==this.#n?this.#n:this.#n="win32"===this.#e&&0===this.#s&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#t;return void 0!==this.#l?this.#l:this.#l=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#t[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#s?t:""}checkFollowGlobstar(){return!(0===this.#s||!this.isGlobstar()||!this.#a)}markFollowGlobstar(){return!(0===this.#s||!this.isGlobstar()||!this.#a)&&(this.#a=!1,!0)}}