import{GLOBSTAR}from"minimatch";const isPatternList=t=>t.length>=1,isGlobList=t=>t.length>=1;export class Pattern{#t;#s;#i;length;#h;#r;#e;#n;#o;#l;#g=!0;constructor(t,s,i,h){if(!isPatternList(t))throw new TypeError("empty pattern list");if(!isGlobList(s))throw new TypeError("empty glob list");if(s.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#s=s,this.#i=i,this.#h=h,0===this.#i)if(this.isUNC()){const[t,s,i,h,...r]=this.#t,[e,n,o,l,...g]=this.#s;""===r[0]&&(r.shift(),g.shift());const a=[t,s,i,h,""].join("/"),u=[e,n,o,l,""].join("/");this.#t=[a,...r],this.#s=[u,...g],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){const[t,...s]=this.#t,[i,...h]=this.#s;""===s[0]&&(s.shift(),h.shift());const r=t+"/",e=i+"/";this.#t=[r,...s],this.#s=[e,...h],this.length=this.#t.length}}pattern(){return this.#t[this.#i]}isString(){return"string"==typeof this.#t[this.#i]}isGlobstar(){return this.#t[this.#i]===GLOBSTAR}isRegExp(){return this.#t[this.#i]instanceof RegExp}globString(){return this.#e=this.#e||(0===this.#i?this.isAbsolute()?this.#s[0]+this.#s.slice(1).join("/"):this.#s.join("/"):this.#s.slice(this.#i).join("/"))}hasMore(){return this.length>this.#i+1}rest(){return void 0!==this.#r?this.#r:this.hasMore()?(this.#r=new Pattern(this.#t,this.#s,this.#i+1,this.#h),this.#r.#l=this.#l,this.#r.#o=this.#o,this.#r.#n=this.#n,this.#r):this.#r=null}isUNC(){const t=this.#t;return void 0!==this.#o?this.#o:this.#o="win32"===this.#h&&0===this.#i&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#t;return void 0!==this.#n?this.#n:this.#n="win32"===this.#h&&0===this.#i&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#t;return void 0!==this.#l?this.#l:this.#l=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#t[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#i?t:""}checkFollowGlobstar(){return!(0===this.#i||!this.isGlobstar()||!this.#g)}markFollowGlobstar(){return!(0===this.#i||!this.isGlobstar()||!this.#g||(this.#g=!1,0))}}