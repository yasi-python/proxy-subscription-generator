let browserslist=require("browserslist"),{agents:agents}=require("caniuse-lite/dist/unpacker/agents"),utils=require("./utils");class Browsers{constructor(e,s,t,i){this.data=e,this.options=t||{},this.browserslistOpts=i||{},this.selected=this.parse(s)}static prefixes(){if(this.prefixesCache)return this.prefixesCache;this.prefixesCache=[];for(let e in agents)this.prefixesCache.push(`-${agents[e].prefix}-`);return this.prefixesCache=utils.uniq(this.prefixesCache).sort((e,s)=>s.length-e.length),this.prefixesCache}static withPrefix(e){return this.prefixesRegexp||(this.prefixesRegexp=new RegExp(this.prefixes().join("|"))),this.prefixesRegexp.test(e)}isSelected(e){return this.selected.includes(e)}parse(e){let s={};for(let e in this.browserslistOpts)s[e]=this.browserslistOpts[e];return s.path=this.options.from,browserslist(e,s)}prefix(e){let[s,t]=e.split(" "),i=this.data[s],r=i.prefix_exceptions&&i.prefix_exceptions[t];return r||(r=i.prefix),`-${r}-`}}module.exports=Browsers;