let Declaration=require("../declaration"),{getGridGap:getGridGap,inheritGridGap:inheritGridGap,parseGridAreas:parseGridAreas,prefixTrackProp:prefixTrackProp,prefixTrackValue:prefixTrackValue,warnGridGap:warnGridGap,warnMissedAreas:warnMissedAreas}=require("./grid-utils");function getGridRows(r){return r.trim().slice(1,-1).split(/["']\s*["']?/g)}class GridTemplateAreas extends Declaration{insert(r,e,a,i){if("-ms-"!==e)return super.insert(r,e,a);let s=!1,p=!1,l=r.parent,t=getGridGap(r);t=inheritGridGap(r,t)||t,l.walkDecls(/-ms-grid-rows/,r=>r.remove()),l.walkDecls(/grid-template-(rows|columns)/,r=>{if("grid-template-rows"===r.prop){p=!0;let{prop:a,value:i}=r;r.cloneBefore({prop:prefixTrackProp({prefix:e,prop:a}),value:prefixTrackValue({gap:t.row,value:i})})}else s=!0});let o=getGridRows(r.value);s&&!p&&t.row&&o.length>1&&r.cloneBefore({prop:"-ms-grid-rows",raws:{},value:prefixTrackValue({gap:t.row,value:`repeat(${o.length}, auto)`})}),warnGridGap({decl:r,gap:t,hasColumns:s,result:i});let d=parseGridAreas({gap:t,rows:o});return warnMissedAreas(d,r,i),r}}GridTemplateAreas.names=["grid-template-areas"],module.exports=GridTemplateAreas;