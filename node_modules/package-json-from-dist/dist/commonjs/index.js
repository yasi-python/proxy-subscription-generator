"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadPackageJson=exports.findPackageJson=void 0;const node_fs_1=require("node:fs"),node_path_1=require("node:path"),node_url_1=require("node:url"),NM=`${node_path_1.sep}node_modules${node_path_1.sep}`,STORE=`.store${node_path_1.sep}`,PKG=`${node_path_1.sep}package${node_path_1.sep}`,DIST=`${node_path_1.sep}dist${node_path_1.sep}`,findPackageJson=(e,n="../package.json")=>{const s="object"==typeof e||e.startsWith("file://")?(0,node_url_1.fileURLToPath)(e):e,o=(0,node_path_1.dirname)(s),t=o.lastIndexOf(NM);if(-1!==t){const e=o.substring(0,t+NM.length),n=o.substring(t+NM.length);if(n.startsWith(STORE)){const s=n.indexOf(PKG,STORE.length);if(s)return(0,node_path_1.resolve)(e,n.substring(0,s+PKG.length),"package.json")}const s=n.startsWith("@")?n.split(node_path_1.sep,2).join(node_path_1.sep):String(n.split(node_path_1.sep)[0]);return(0,node_path_1.resolve)(e,s,"package.json")}{const e=o.lastIndexOf(DIST);return-1!==e?(0,node_path_1.resolve)(o.substring(0,e),"package.json"):(0,node_path_1.resolve)(o,n)}};exports.findPackageJson=findPackageJson;const loadPackageJson=(e,n="../package.json")=>JSON.parse((0,node_fs_1.readFileSync)((0,exports.findPackageJson)(e,n),"utf8"));exports.loadPackageJson=loadPackageJson;