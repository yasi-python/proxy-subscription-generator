"use strict";const primordials={},{defineProperty:ReflectDefineProperty,getOwnPropertyDescriptor:ReflectGetOwnPropertyDescriptor,ownKeys:ReflectOwnKeys}=Reflect,{apply:apply,bind:bind,call:call}=Function.prototype,uncurryThis=bind.bind(call);primordials.uncurryThis=uncurryThis;const applyBind=bind.bind(apply);primordials.applyBind=applyBind;const varargsMethods=["ArrayOf","ArrayPrototypePush","ArrayPrototypeUnshift","MathHypot","MathMax","MathMin","StringPrototypeConcat","TypedArrayOf"];function getNewKey(e){return"symbol"==typeof e?`Symbol${e.description[7].toUpperCase()}${e.description.slice(8)}`:`${e[0].toUpperCase()}${e.slice(1)}`}function copyAccessor(e,r,t,{enumerable:o,get:a,set:p}){ReflectDefineProperty(e,`${r}Get${t}`,{value:uncurryThis(a),enumerable:o}),void 0!==p&&ReflectDefineProperty(e,`${r}Set${t}`,{value:uncurryThis(p),enumerable:o})}function copyPropsRenamed(e,r,t){for(const o of ReflectOwnKeys(e)){const a=getNewKey(o),p=ReflectGetOwnPropertyDescriptor(e,o);if("get"in p)copyAccessor(r,t,a,p);else{const o=`${t}${a}`;ReflectDefineProperty(r,o,p),varargsMethods.includes(o)&&ReflectDefineProperty(r,`${o}Apply`,{value:applyBind(p.value,e)})}}}function copyPropsRenamedBound(e,r,t){for(const o of ReflectOwnKeys(e)){const a=getNewKey(o),p=ReflectGetOwnPropertyDescriptor(e,o);if("get"in p)copyAccessor(r,t,a,p);else{const{value:o}=p;"function"==typeof o&&(p.value=o.bind(e));const n=`${t}${a}`;ReflectDefineProperty(r,n,p),varargsMethods.includes(n)&&ReflectDefineProperty(r,`${n}Apply`,{value:applyBind(o,e)})}}}function copyPrototype(e,r,t){for(const o of ReflectOwnKeys(e)){const a=getNewKey(o),p=ReflectGetOwnPropertyDescriptor(e,o);if("get"in p)copyAccessor(r,t,a,p);else{const{value:e}=p;"function"==typeof e&&(p.value=uncurryThis(e));const o=`${t}${a}`;ReflectDefineProperty(r,o,p),varargsMethods.includes(o)&&ReflectDefineProperty(r,`${o}Apply`,{value:applyBind(e)})}}}["Proxy","globalThis"].forEach(e=>{primordials[e]=globalThis[e]}),[decodeURI,decodeURIComponent,encodeURI,encodeURIComponent].forEach(e=>{primordials[e.name]=e}),["JSON","Math","Proxy","Reflect"].forEach(e=>{copyPropsRenamed(global[e],primordials,e)}),["Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int16Array","Int32Array","Int8Array","Map","Number","Object","RangeError","ReferenceError","RegExp","Set","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet"].forEach(e=>{const r=global[e];primordials[e]=r,copyPropsRenamed(r,primordials,e),copyPrototype(r.prototype,primordials,`${e}Prototype`)}),["Promise"].forEach(e=>{const r=global[e];primordials[e]=r,copyPropsRenamedBound(r,primordials,e),copyPrototype(r.prototype,primordials,`${e}Prototype`)}),[{name:"TypedArray",original:Reflect.getPrototypeOf(Uint8Array)},{name:"ArrayIterator",original:{prototype:Reflect.getPrototypeOf(Array.prototype[Symbol.iterator]())}},{name:"StringIterator",original:{prototype:Reflect.getPrototypeOf(String.prototype[Symbol.iterator]())}}].forEach(({name:e,original:r})=>{primordials[e]=r,copyPrototype(r,primordials,e),copyPrototype(r.prototype,primordials,`${e}Prototype`)});const{ArrayPrototypeForEach:ArrayPrototypeForEach,FunctionPrototypeCall:FunctionPrototypeCall,Map:Map,ObjectFreeze:ObjectFreeze,ObjectSetPrototypeOf:ObjectSetPrototypeOf,Set:Set,SymbolIterator:SymbolIterator,WeakMap:WeakMap,WeakSet:WeakSet}=primordials,createSafeIterator=(e,r)=>{class t{constructor(r){this._iterator=e(r)}next(){return r(this._iterator)}[SymbolIterator](){return this}}return ObjectSetPrototypeOf(t.prototype,null),ObjectFreeze(t.prototype),ObjectFreeze(t),t};primordials.SafeArrayIterator=createSafeIterator(primordials.ArrayPrototypeSymbolIterator,primordials.ArrayIteratorPrototypeNext),primordials.SafeStringIterator=createSafeIterator(primordials.StringPrototypeSymbolIterator,primordials.StringIteratorPrototypeNext);const copyProps=(e,r)=>{ArrayPrototypeForEach(ReflectOwnKeys(e),t=>{ReflectGetOwnPropertyDescriptor(r,t)||ReflectDefineProperty(r,t,ReflectGetOwnPropertyDescriptor(e,t))})},makeSafe=(e,r)=>{if(SymbolIterator in e.prototype){const t=new e;let o;ArrayPrototypeForEach(ReflectOwnKeys(e.prototype),a=>{if(!ReflectGetOwnPropertyDescriptor(r.prototype,a)){const p=ReflectGetOwnPropertyDescriptor(e.prototype,a);if("function"==typeof p.value&&0===p.value.length&&SymbolIterator in(FunctionPrototypeCall(p.value,t)??{})){const e=uncurryThis(p.value);o=o??uncurryThis(e(t).next);const r=createSafeIterator(e,o);p.value=function(){return new r(this)}}ReflectDefineProperty(r.prototype,a,p)}})}else copyProps(e.prototype,r.prototype);return copyProps(e,r),ObjectSetPrototypeOf(r.prototype,null),ObjectFreeze(r.prototype),ObjectFreeze(r),r};primordials.makeSafe=makeSafe,primordials.SafeMap=makeSafe(Map,class extends Map{constructor(e){super(e)}}),primordials.SafeWeakMap=makeSafe(WeakMap,class extends WeakMap{constructor(e){super(e)}}),primordials.SafeSet=makeSafe(Set,class extends Set{constructor(e){super(e)}}),primordials.SafeWeakSet=makeSafe(WeakSet,class extends WeakSet{constructor(e){super(e)}}),ObjectSetPrototypeOf(primordials,null),ObjectFreeze(primordials),module.exports=primordials;