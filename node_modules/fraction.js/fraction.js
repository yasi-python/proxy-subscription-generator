/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
var MAX_CYCLE_LEN=2e3,P={s:1,n:0,d:1};function assign(n,t){if(isNaN(n=parseInt(n,10)))throw InvalidParameter();return n*t}function newFraction(n,t){if(0===t)throw DivisionByZero();var i=Object.create(Fraction.prototype);i.s=n<0?-1:1;var r=gcd(n=n<0?-n:n,t);return i.n=n/r,i.d=t/r,i}function factorize(n){for(var t={},i=n,r=2,s=4;s<=i;){for(;i%r===0;)i/=r,t[r]=(t[r]||0)+1;s+=1+2*r++}return i!==n?i>1&&(t[i]=(t[i]||0)+1):t[n]=(t[n]||0)+1,t}var parse=function(n,t){var i,r=0,s=1,e=1,a=0,o=0,h=0,u=1,f=1,c=0,d=1,w=1,l=1,N=1e7;if(null==n);else if(void 0!==t){if(e=(r=n)*(s=t),r%1!=0||s%1!=0)throw NonIntegerParameter()}else switch(typeof n){case"object":if("d"in n&&"n"in n)r=n.n,s=n.d,"s"in n&&(r*=n.s);else{if(!(0 in n))throw InvalidParameter();r=n[0],1 in n&&(s=n[1])}e=r*s;break;case"number":if(n<0&&(e=n,n=-n),n%1==0)r=n;else if(n>0){for(n>=1&&(n/=f=Math.pow(10,Math.floor(1+Math.log(n)/Math.LN10)));d<=N&&l<=N;){if(n===(i=(c+w)/(d+l))){d+l<=N?(r=c+w,s=d+l):l>d?(r=w,s=l):(r=c,s=d);break}n>i?(c+=w,d+=l):(w+=c,l+=d),d>N?(r=w,s=l):(r=c,s=d)}r*=f}else(isNaN(n)||isNaN(t))&&(s=r=NaN);break;case"string":if(null===(d=n.match(/\d+|./g)))throw InvalidParameter();if("-"===d[c]?(e=-1,c++):"+"===d[c]&&c++,d.length===c+1?o=assign(d[c++],e):"."===d[c+1]||"."===d[c]?("."!==d[c]&&(a=assign(d[c++],e)),(++c+1===d.length||"("===d[c+1]&&")"===d[c+3]||"'"===d[c+1]&&"'"===d[c+3])&&(o=assign(d[c],e),u=Math.pow(10,d[c].length),c++),("("===d[c]&&")"===d[c+2]||"'"===d[c]&&"'"===d[c+2])&&(h=assign(d[c+1],e),f=Math.pow(10,d[c+1].length)-1,c+=3)):"/"===d[c+1]||":"===d[c+1]?(o=assign(d[c],e),u=assign(d[c+2],1),c+=3):"/"===d[c+3]&&" "===d[c+1]&&(a=assign(d[c],e),o=assign(d[c+2],e),u=assign(d[c+4],1),c+=5),d.length<=c){e=r=h+(s=u*f)*a+f*o;break}default:throw InvalidParameter()}if(0===s)throw DivisionByZero();P.s=e<0?-1:1,P.n=Math.abs(r),P.d=Math.abs(s)};function modpow(n,t,i){for(var r=1;t>0;n=n*n%i,t>>=1)1&t&&(r=r*n%i);return r}function cycleLen(n,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var i=10%t,r=1;1!==i;r++)if(i=10*i%t,r>MAX_CYCLE_LEN)return 0;return r}function cycleStart(n,t,i){for(var r=1,s=modpow(10,i,t),e=0;e<300;e++){if(r===s)return e;r=10*r%t,s=10*s%t}return 0}function gcd(n,t){if(!n)return t;if(!t)return n;for(;;){if(!(n%=t))return t;if(!(t%=n))return n}}export default function Fraction(n,t){if(parse(n,t),!(this instanceof Fraction))return newFraction(P.s*P.n,P.d);n=gcd(P.d,P.n),this.s=P.s,this.n=P.n/n,this.d=P.d/n}var DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction.prototype={s:1,n:0,d:1,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(n,t){return parse(n,t),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(n,t){return parse(n,t),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(n,t){return parse(n,t),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(n,t){return parse(n,t),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(n,t){if(isNaN(this.n)||isNaN(this.d))return new Fraction(NaN);if(void 0===n)return newFraction(this.s*this.n%this.d,1);if(parse(n,t),0===P.n&&0===this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(n,t){return parse(n,t),newFraction(gcd(P.n,this.n)*gcd(P.d,this.d),P.d*this.d)},lcm:function(n,t){return parse(n,t),0===P.n&&0===this.n?newFraction(0,1):newFraction(P.n*this.n,gcd(P.n,this.n)*gcd(P.d,this.d))},ceil:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.ceil(n*this.s*this.n/this.d),n)},floor:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.floor(n*this.s*this.n/this.d),n)},round:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.round(n*this.s*this.n/this.d),n)},roundTo:function(n,t){return parse(n,t),newFraction(this.s*Math.round(this.n*P.d/(this.d*P.n))*P.n,P.d)},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(n,t){if(parse(n,t),1===P.d)return P.s<0?newFraction(Math.pow(this.s*this.d,P.n),Math.pow(this.n,P.n)):newFraction(Math.pow(this.s*this.n,P.n),Math.pow(this.d,P.n));if(this.s<0)return null;var i=factorize(this.n),r=factorize(this.d),s=1,e=1;for(var a in i)if("1"!==a){if("0"===a){s=0;break}if(i[a]*=P.n,i[a]%P.d!==0)return null;i[a]/=P.d,s*=Math.pow(a,i[a])}for(var a in r)if("1"!==a){if(r[a]*=P.n,r[a]%P.d!==0)return null;r[a]/=P.d,e*=Math.pow(a,r[a])}return P.s<0?newFraction(e,s):newFraction(s,e)},equals:function(n,t){return parse(n,t),this.s*this.n*P.d===P.s*P.n*this.d},compare:function(n,t){parse(n,t);var i=this.s*this.n*P.d-P.s*P.n*this.d;return(0<i)-(i<0)},simplify:function(n){if(isNaN(this.n)||isNaN(this.d))return this;n=n||.001;for(var t=this.abs(),i=t.toContinued(),r=1;r<i.length;r++){for(var s=newFraction(i[r-1],1),e=r-2;e>=0;e--)s=s.inverse().add(i[e]);if(Math.abs(s.sub(t).valueOf())<n)return s.mul(this.s)}return this},divisible:function(n,t){return parse(n,t),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(n){var t,i="",r=this.n,s=this.d;return this.s<0&&(i+="-"),1===s?i+=r:(n&&(t=Math.floor(r/s))>0&&(i+=t,i+=" ",r%=s),i+=r,i+="/",i+=s),i},toLatex:function(n){var t,i="",r=this.n,s=this.d;return this.s<0&&(i+="-"),1===s?i+=r:(n&&(t=Math.floor(r/s))>0&&(i+=t,r%=s),i+="\\frac{",i+=r,i+="}{",i+=s,i+="}"),i},toContinued:function(){var n,t=this.n,i=this.d,r=[];if(isNaN(t)||isNaN(i))return r;do{r.push(Math.floor(t/i)),n=t%i,t=i,i=n}while(1!==t);return r},toString:function(n){var t=this.n,i=this.d;if(isNaN(t)||isNaN(i))return"NaN";n=n||15;var r=cycleLen(t,i),s=cycleStart(t,i,r),e=this.s<0?"-":"";if(e+=t/i|0,t%=i,(t*=10)&&(e+="."),r){for(var a=s;a--;)e+=t/i|0,t%=i,t*=10;e+="(";for(a=r;a--;)e+=t/i|0,t%=i,t*=10;e+=")"}else for(a=n;t&&a--;)e+=t/i|0,t%=i,t*=10;return e}};