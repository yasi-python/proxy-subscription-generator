"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _flow=require("../plugins/flow"),_typescript=require("../plugins/typescript"),_index=require("../tokenizer/index"),_keywords=require("../tokenizer/keywords"),_types=require("../tokenizer/types"),_base=require("./base"),_expression=require("./expression"),_util=require("./util");function parseSpread(){_index.next.call(void 0),_expression.parseMaybeAssign.call(void 0,!1)}function parseRest(e){_index.next.call(void 0),parseBindingAtom(e)}function parseBindingIdentifier(e){_expression.parseIdentifier.call(void 0),markPriorBindingIdentifier(e)}function parseImportedIdentifier(){_expression.parseIdentifier.call(void 0),_base.state.tokens[_base.state.tokens.length-1].identifierRole=_index.IdentifierRole.ImportDeclaration}function markPriorBindingIdentifier(e){let t;t=0===_base.state.scopeDepth?_index.IdentifierRole.TopLevelDeclaration:e?_index.IdentifierRole.BlockScopedDeclaration:_index.IdentifierRole.FunctionScopedDeclaration,_base.state.tokens[_base.state.tokens.length-1].identifierRole=t}function parseBindingAtom(e){switch(_base.state.type){case _types.TokenType._this:{const e=_index.pushTypeContext.call(void 0,0);return _index.next.call(void 0),void _index.popTypeContext.call(void 0,e)}case _types.TokenType._yield:case _types.TokenType.name:return _base.state.type=_types.TokenType.name,void parseBindingIdentifier(e);case _types.TokenType.bracketL:return _index.next.call(void 0),void parseBindingList(_types.TokenType.bracketR,e,!0);case _types.TokenType.braceL:return void _expression.parseObj.call(void 0,!0,e);default:_util.unexpected.call(void 0)}}function parseBindingList(e,t,i=!1,s=!1,n=0){let a=!0,r=!1;const o=_base.state.tokens.length;for(;!_index.eat.call(void 0,e)&&!_base.state.error;)if(a?a=!1:(_util.expect.call(void 0,_types.TokenType.comma),_base.state.tokens[_base.state.tokens.length-1].contextId=n,!r&&_base.state.tokens[o].isType&&(_base.state.tokens[_base.state.tokens.length-1].isType=!0,r=!0)),i&&_index.match.call(void 0,_types.TokenType.comma));else{if(_index.eat.call(void 0,e))break;if(_index.match.call(void 0,_types.TokenType.ellipsis)){parseRest(t),parseAssignableListItemTypes(),_index.eat.call(void 0,_types.TokenType.comma),_util.expect.call(void 0,e);break}parseAssignableListItem(s,t)}}function parseAssignableListItem(e,t){e&&_typescript.tsParseModifiers.call(void 0,[_keywords.ContextualKeyword._public,_keywords.ContextualKeyword._protected,_keywords.ContextualKeyword._private,_keywords.ContextualKeyword._readonly,_keywords.ContextualKeyword._override]),parseMaybeDefault(t),parseAssignableListItemTypes(),parseMaybeDefault(t,!0)}function parseAssignableListItemTypes(){_base.isFlowEnabled?_flow.flowParseAssignableListItemTypes.call(void 0):_base.isTypeScriptEnabled&&_typescript.tsParseAssignableListItemTypes.call(void 0)}function parseMaybeDefault(e,t=!1){if(t||parseBindingAtom(e),!_index.eat.call(void 0,_types.TokenType.eq))return;const i=_base.state.tokens.length-1;_expression.parseMaybeAssign.call(void 0),_base.state.tokens[i].rhsEndIndex=_base.state.tokens.length}exports.parseSpread=parseSpread,exports.parseRest=parseRest,exports.parseBindingIdentifier=parseBindingIdentifier,exports.parseImportedIdentifier=parseImportedIdentifier,exports.markPriorBindingIdentifier=markPriorBindingIdentifier,exports.parseBindingAtom=parseBindingAtom,exports.parseBindingList=parseBindingList,exports.parseMaybeDefault=parseMaybeDefault;