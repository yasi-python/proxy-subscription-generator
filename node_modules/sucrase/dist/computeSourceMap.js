"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _genmapping=require("@jridgewell/gen-mapping"),_charcodes=require("./parser/util/charcodes");function computeSourceMap({code:e,mappings:o},n,t,r,c){const a=computeSourceColumns(r,c),l=new(0,_genmapping.GenMapping)({file:t.compiledFilename});let d=0,p=o[0];for(;void 0===p&&d<o.length-1;)d++,p=o[d];let i=0,g=0;p!==g&&_genmapping.maybeAddSegment.call(void 0,l,i,0,n,i,0);for(let t=0;t<e.length;t++){if(t===p){const e=p-g,r=a[d];for(_genmapping.maybeAddSegment.call(void 0,l,i,e,n,i,r);(p===t||void 0===p)&&d<o.length-1;)d++,p=o[d]}e.charCodeAt(t)===_charcodes.charCodes.lineFeed&&(i++,g=t+1,p!==g&&_genmapping.maybeAddSegment.call(void 0,l,i,0,n,i,0))}const{sourceRoot:s,sourcesContent:u,...m}=_genmapping.toEncodedMap.call(void 0,l);return m}function computeSourceColumns(e,o){const n=new Array(o.length);let t=0,r=o[t].start,c=0;for(let a=0;a<e.length;a++)a===r&&(n[t]=r-c,t++,r=o[t].start),e.charCodeAt(a)===_charcodes.charCodes.lineFeed&&(c=a+1);return n}exports.default=computeSourceMap;