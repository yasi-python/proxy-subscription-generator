const{transform:transform}=require("../dist"),ModuleKindCommonJS=1,JsxEmitReactJSX=4,JsxEmitReactJSXDev=5;function create(e){const{nodeModuleEmitKind:t}=e,{module:s,jsx:r,jsxFactory:o,jsxFragmentFactory:n,jsxImportSource:i,esModuleInterop:a,verbatimModuleSyntax:c}=e.service.config.options;return{transpile(e,m){const{fileName:p}=m,u=[];p.endsWith(".js")||p.endsWith(".jsx")||p.endsWith(".mjs")||p.endsWith(".cjs")||u.push("typescript"),1!==s&&"nodecjs"!==t||u.push("imports"),(p.endsWith(".tsx")||p.endsWith(".jsx"))&&u.push("jsx");const{code:d,sourceMap:x}=transform(e,{transforms:u,disableESTransforms:!0,jsxRuntime:4===r||5===r?"automatic":"classic",production:4===r,jsxImportSource:i,jsxPragma:o,jsxFragmentPragma:n,keepUnusedImports:c,preserveDynamicImport:"nodecjs"===t,injectCreateRequireForImportRequire:"nodeesm"===t,enableLegacyTypeScriptModuleInterop:!a,sourceMapOptions:{compiledFilename:p},filePath:p});return{outputText:d,sourceMapText:JSON.stringify(x)}}}}exports.create=create;