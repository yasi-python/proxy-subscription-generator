"use strict";let Document=require("./document"),LazyResult=require("./lazy-result"),NoWorkResult=require("./no-work-result"),Root=require("./root");class Processor{constructor(s=[]){this.version="8.5.6",this.plugins=this.normalize(s)}normalize(s){let e=[];for(let r of s)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))e=e.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)e.push(r);else if("function"==typeof r)e.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return e}process(s,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new LazyResult(this,s,e):new NoWorkResult(this,s,e)}use(s){return this.plugins=this.plugins.concat(this.normalize([s])),this}}module.exports=Processor,Processor.default=Processor,Root.registerProcessor(Processor),Document.registerProcessor(Processor);