"use strict";const SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE="\n".charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="\t".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;module.exports=function(e,E={}){let t,r,A,c,a,C,o,s,S,n,d=e.css.valueOf(),_=E.ignoreErrors,h=d.length,O=0,R=[],i=[];function N(E){throw e.error("Unclosed "+E,O)}return{back:function(e){i.push(e)},endOfFile:function(){return 0===i.length&&O>=h},nextToken:function(e){if(i.length)return i.pop();if(O>=h)return;let E=!!e&&e.ignoreUnclosed;switch(t=d.charCodeAt(O),t){case NEWLINE:case SPACE:case TAB:case CR:case FEED:c=O;do{c+=1,t=d.charCodeAt(c)}while(t===SPACE||t===NEWLINE||t===TAB||t===CR||t===FEED);C=["space",d.slice(O,c)],O=c-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let e=String.fromCharCode(t);C=[e,e,O];break}case OPEN_PARENTHESES:if(n=R.length?R.pop()[1]:"",S=d.charCodeAt(O+1),"url"===n&&S!==SINGLE_QUOTE&&S!==DOUBLE_QUOTE&&S!==SPACE&&S!==NEWLINE&&S!==TAB&&S!==FEED&&S!==CR){c=O;do{if(o=!1,c=d.indexOf(")",c+1),-1===c){if(_||E){c=O;break}N("bracket")}for(s=c;d.charCodeAt(s-1)===BACKSLASH;)s-=1,o=!o}while(o);C=["brackets",d.slice(O,c+1),O,c],O=c}else c=d.indexOf(")",O+1),r=d.slice(O,c+1),-1===c||RE_BAD_BRACKET.test(r)?C=["(","(",O]:(C=["brackets",r,O,c],O=c);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:a=t===SINGLE_QUOTE?"'":'"',c=O;do{if(o=!1,c=d.indexOf(a,c+1),-1===c){if(_||E){c=O+1;break}N("string")}for(s=c;d.charCodeAt(s-1)===BACKSLASH;)s-=1,o=!o}while(o);C=["string",d.slice(O,c+1),O,c],O=c;break;case AT:RE_AT_END.lastIndex=O+1,RE_AT_END.test(d),c=0===RE_AT_END.lastIndex?d.length-1:RE_AT_END.lastIndex-2,C=["at-word",d.slice(O,c+1),O,c],O=c;break;case BACKSLASH:for(c=O,A=!0;d.charCodeAt(c+1)===BACKSLASH;)c+=1,A=!A;if(t=d.charCodeAt(c+1),A&&t!==SLASH&&t!==SPACE&&t!==NEWLINE&&t!==TAB&&t!==CR&&t!==FEED&&(c+=1,RE_HEX_ESCAPE.test(d.charAt(c)))){for(;RE_HEX_ESCAPE.test(d.charAt(c+1));)c+=1;d.charCodeAt(c+1)===SPACE&&(c+=1)}C=["word",d.slice(O,c+1),O,c],O=c;break;default:t===SLASH&&d.charCodeAt(O+1)===ASTERISK?(c=d.indexOf("*/",O+2)+1,0===c&&(_||E?c=d.length:N("comment")),C=["comment",d.slice(O,c+1),O,c],O=c):(RE_WORD_END.lastIndex=O+1,RE_WORD_END.test(d),c=0===RE_WORD_END.lastIndex?d.length-1:RE_WORD_END.lastIndex-2,C=["word",d.slice(O,c+1),O,c],R.push(C),O=c)}return O++,C},position:function(){return O}}};