!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).resolveURI=e()}(this,function(){"use strict";const t=/^[\w+.-]+:\/\//,e=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,n=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function s(t){return t.startsWith("/")}function r(t){return/^[.?#]/.test(t)}function o(t){const n=e.exec(t);return c(n[1],n[2]||"",n[3],n[4]||"",n[5]||"/",n[6]||"",n[7]||"")}function c(t,e,n,s,r,o,c){return{scheme:t,user:e,host:n,port:s,path:r,query:o,hash:c,type:7}}function u(e){if(function(t){return t.startsWith("//")}(e)){const t=o("http:"+e);return t.scheme="",t.type=6,t}if(s(e)){const t=o("http://foo.com"+e);return t.scheme="",t.host="",t.type=5,t}if(function(t){return t.startsWith("file:")}(e))return function(t){const e=n.exec(t),r=e[2];return c("file:","",e[1]||"","",s(r)?r:"/"+r,e[3]||"",e[4]||"")}(e);if(function(e){return t.test(e)}(e))return o(e);const r=o("http://foo.com/"+e);return r.scheme="",r.host="",r.type=e?e.startsWith("?")?3:e.startsWith("#")?2:4:1,r}function h(t,e){const n=e<=4,s=t.path.split("/");let r=1,o=0,c=!1;for(let t=1;t<s.length;t++){const e=s[t];e?(c=!1,"."!==e&&(".."!==e?(s[r++]=e,o++):o?(c=!0,o--,r--):n&&(s[r++]=e))):c=!0}let u="";for(let t=1;t<r;t++)u+="/"+s[t];(!u||c&&!u.endsWith("/.."))&&(u+="/"),t.path=u}return function(t,e){if(!t&&!e)return"";const n=u(t);let s=n.type;if(e&&7!==s){const t=u(e),r=t.type;switch(s){case 1:n.hash=t.hash;case 2:n.query=t.query;case 3:case 4:!function(t,e){h(e,e.type),"/"===t.path?t.path=e.path:t.path=function(t){if(t.endsWith("/.."))return t;const e=t.lastIndexOf("/");return t.slice(0,e+1)}(e.path)+t.path}(n,t);case 5:n.user=t.user,n.host=t.host,n.port=t.port;case 6:n.scheme=t.scheme}r>s&&(s=r)}h(n,s);const o=n.query+n.hash;switch(s){case 2:case 3:return o;case 4:{const s=n.path.slice(1);return s?r(e||t)&&!r(s)?"./"+s+o:s+o:o||"."}case 5:return n.path+o;default:return n.scheme+"//"+n.user+n.host+n.port+n.path+o}}});