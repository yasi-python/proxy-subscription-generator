"use strict";var identity=require("../../nodes/identity.js"),Pair=require("../../nodes/Pair.js"),YAMLMap=require("../../nodes/YAMLMap.js");class YAMLSet extends YAMLMap.YAMLMap{constructor(e){super(e),this.tag=YAMLSet.tag}add(e){let t;t=identity.isPair(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Pair.Pair(e.key,null):new Pair.Pair(e,null),YAMLMap.findPair(this.items,t.key)||this.items.push(t)}get(e,t){const i=YAMLMap.findPair(this.items,e);return!t&&identity.isPair(i)?identity.isScalar(i.key)?i.key.value:i.key:i}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const i=YAMLMap.findPair(this.items,e);i&&!t?this.items.splice(this.items.indexOf(i),1):!i&&t&&this.items.push(new Pair.Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,i){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,i);throw new Error("Set items must all have null values")}static from(e,t,i){const{replacer:s}=i,a=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof s&&(e=s.call(t,e,e)),a.items.push(Pair.createPair(e,null,i));return a}}YAMLSet.tag="tag:yaml.org,2002:set";const set={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,i)=>YAMLSet.from(e,t,i),resolve(e,t){if(identity.isMap(e)){if(e.hasAllNullValues(!0))return Object.assign(new YAMLSet,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};exports.YAMLSet=YAMLSet,exports.set=set;