"use strict";var identity=require("../nodes/identity.js"),stringify=require("./stringify.js"),stringifyComment=require("./stringifyComment.js");function stringifyDocument(t,n){const e=[];let i=!0===n.directives;if(!1!==n.directives&&t.directives){const n=t.directives.toString(t);n?(e.push(n),i=!0):t.directives.docStart&&(i=!0)}i&&e.push("---");const s=stringify.createStringifyContext(t,n),{commentString:o}=s.options;if(t.commentBefore){1!==e.length&&e.unshift("");const n=o(t.commentBefore);e.unshift(stringifyComment.indentComment(n,""))}let m=!1,r=null;if(t.contents){if(identity.isNode(t.contents)){if(t.contents.spaceBefore&&i&&e.push(""),t.contents.commentBefore){const n=o(t.contents.commentBefore);e.push(stringifyComment.indentComment(n,""))}s.forceBlockIndent=!!t.comment,r=t.contents.comment}const n=r?void 0:()=>m=!0;let c=stringify.stringify(t.contents,s,()=>r=null,n);r&&(c+=stringifyComment.lineComment(c,"",o(r))),"|"!==c[0]&&">"!==c[0]||"---"!==e[e.length-1]?e.push(c):e[e.length-1]=`--- ${c}`}else e.push(stringify.stringify(t.contents,s));if(t.directives?.docEnd)if(t.comment){const n=o(t.comment);n.includes("\n")?(e.push("..."),e.push(stringifyComment.indentComment(n,""))):e.push(`... ${n}`)}else e.push("...");else{let n=t.comment;n&&m&&(n=n.replace(/^\n+/,"")),n&&(m&&!r||""===e[e.length-1]||e.push(""),e.push(stringifyComment.indentComment(o(n),"")))}return e.join("\n")+"\n"}exports.stringifyDocument=stringifyDocument;