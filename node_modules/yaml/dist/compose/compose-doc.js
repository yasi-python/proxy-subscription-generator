"use strict";var Document=require("../doc/Document.js"),composeNode=require("./compose-node.js"),resolveEnd=require("./resolve-end.js"),resolveProps=require("./resolve-props.js");function composeDoc(e,o,{offset:s,start:t,value:n,end:r},c){const i=Object.assign({_directives:o},e),d=new Document.Document(void 0,i),m={atKey:!1,atRoot:!0,directives:d.directives,options:d.options,schema:d.schema},p=resolveProps.resolveProps(t,{indicator:"doc-start",next:n??r?.[0],offset:s,onError:c,parentIndent:0,startOnNewline:!0});p.found&&(d.directives.docStart=!0,!n||"block-map"!==n.type&&"block-seq"!==n.type||p.hasNewline||c(p.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),d.contents=n?composeNode.composeNode(m,n,p,c):composeNode.composeEmptyNode(m,p.end,t,null,p,c);const a=d.contents.range[2],l=resolveEnd.resolveEnd(r,a,!1,c);return l.comment&&(d.comment=l.comment),d.range=[s,a,l.offset],d}exports.composeDoc=composeDoc;