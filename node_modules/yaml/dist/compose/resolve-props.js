"use strict";function resolveProps(e,{flow:t,indicator:n,next:o,offset:s,onError:a,parentIndent:c,startOnNewline:r}){let l=!1,i=r,p=r,u="",d="",m=!1,f=!1,h=null,b=null,y=null,A=null,E=null,T=null,N=null;for(const s of e)switch(f&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&a(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),f=!1),h&&(i&&"comment"!==s.type&&"newline"!==s.type&&a(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),h=null),s.type){case"space":t||"doc-start"===n&&"flow-collection"===o?.type||!s.source.includes("\t")||(h=s),p=!0;break;case"comment":{p||a(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=s.source.substring(1)||" ";u?u+=d+e:u=e,d="",i=!1;break}case"newline":i?u?u+=s.source:T&&"seq-item-ind"===n||(l=!0):d+=s.source,i=!0,m=!0,(b||y)&&(A=s),p=!0;break;case"anchor":b&&a(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&a(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=s,N??(N=s.offset),i=!1,p=!1,f=!0;break;case"tag":y&&a(s,"MULTIPLE_TAGS","A node can have at most one tag"),y=s,N??(N=s.offset),i=!1,p=!1,f=!0;break;case n:(b||y)&&a(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),T&&a(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${t??"collection"}`),T=s,i="seq-item-ind"===n||"explicit-key-ind"===n,p=!1;break;case"comma":if(t){E&&a(s,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),E=s,i=!1,p=!1;break}default:a(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),i=!1,p=!1}const w=e[e.length-1],_=w?w.offset+w.source.length:s;return f&&o&&"space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&("scalar"!==o.type||""!==o.source)&&a(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),h&&(i&&h.indent<=c||"block-map"===o?.type||"block-seq"===o?.type)&&a(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:E,found:T,spaceBefore:l,comment:u,hasNewline:m,anchor:b,tag:y,newlineAfterProp:A,end:_,start:N??_}}exports.resolveProps=resolveProps;