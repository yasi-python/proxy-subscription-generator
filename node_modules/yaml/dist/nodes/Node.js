"use strict";var applyReviver=require("../doc/applyReviver.js"),identity=require("./identity.js"),toJS=require("./toJS.js");class NodeBase{constructor(e){Object.defineProperty(this,identity.NODE_TYPE,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:o,reviver:i}={}){if(!identity.isDocument(e))throw new TypeError("A document argument is required");const n={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},s=toJS.toJS(this,"",n);if("function"==typeof o)for(const{count:e,res:t}of n.anchors.values())o(t,e);return"function"==typeof i?applyReviver.applyReviver(i,{"":s},"",s):s}}exports.NodeBase=NodeBase;