import{YAMLSeq}from"../nodes/YAMLSeq.js";import{resolveProps}from"./resolve-props.js";import{flowIndentCheck}from"./util-flow-indent-check.js";function resolveBlockSeq({composeNode:e,composeEmptyNode:o},t,n,s,r){const c=new(r?.nodeClass??YAMLSeq)(t.schema);t.atRoot&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let m=n.offset,i=null;for(const{start:r,value:l}of n.items){const a=resolveProps(r,{indicator:"seq-item-ind",next:l,offset:m,onError:s,parentIndent:n.indent,startOnNewline:!0});if(!a.found){if(!(a.anchor||a.tag||l)){i=a.end,a.comment&&(c.comment=a.comment);continue}l&&"block-seq"===l.type?s(a.end,"BAD_INDENT","All sequence items must start at the same column"):s(m,"MISSING_CHAR","Sequence item without - indicator")}const f=l?e(t,l,a,s):o(t,a.end,r,null,a,s);t.schema.compat&&flowIndentCheck(n.indent,l,s),m=f.range[2],c.items.push(f)}return c.range=[n.offset,m,i??m],c}export{resolveBlockSeq};