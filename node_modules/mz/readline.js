var readline=require("readline"),Promise=require("any-promise"),objectAssign=require("object-assign"),Interface=readline.Interface;function wrapCompleter(e){return 2===e.length?e:function(t,n){var r=e(t);if("function"!=typeof r.then)return n(null,r);r.catch(n).then(function(e){process.nextTick(function(){n(null,e)})})}}function InterfaceAsPromised(e,t,n,r){if(1===arguments.length){var o=e;"function"==typeof o.completer&&(o=objectAssign({},o,{completer:wrapCompleter(o.completer)})),Interface.call(this,o)}else"function"==typeof n&&(n=wrapCompleter(n)),Interface.call(this,e,t,n,r)}InterfaceAsPromised.prototype=Object.create(Interface.prototype),InterfaceAsPromised.prototype.question=function(e,t){if("function"==typeof t)return Interface.prototype.question.call(this,e,t);var n=this;return new Promise(function(t){Interface.prototype.question.call(n,e,t)})},objectAssign(exports,readline,{Interface:InterfaceAsPromised,createInterface:function(e,t,n,r){return 1===arguments.length?new InterfaceAsPromised(e):new InterfaceAsPromised(e,t,n,r)}});