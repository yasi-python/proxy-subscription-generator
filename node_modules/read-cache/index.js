var fs=require("fs"),path=require("path"),pify=require("pify"),stat=pify(fs.stat),readFile=pify(fs.readFile),resolve=path.resolve,cache=Object.create(null);function convert(e,t){return Buffer.isEncoding(t)?e.toString(t):e}module.exports=function(e,t){return e=resolve(e),stat(e).then(function(r){var c=cache[e];return c&&c.mtime.getTime()===r.mtime.getTime()?convert(c.content,t):readFile(e).then(function(c){return cache[e]={mtime:r.mtime,content:c},convert(c,t)})}).catch(function(t){return cache[e]=null,Promise.reject(t)})},module.exports.sync=function(e,t){e=resolve(e);try{var r=fs.statSync(e),c=cache[e];if(c&&c.mtime.getTime()===r.mtime.getTime())return convert(c.content,t);var n=fs.readFileSync(e);return cache[e]={mtime:r.mtime,content:n},convert(n,t)}catch(t){throw cache[e]=null,t}},module.exports.get=function(e,t){return e=resolve(e),cache[e]?convert(cache[e].content,t):null},module.exports.clear=function(){cache=Object.create(null)};