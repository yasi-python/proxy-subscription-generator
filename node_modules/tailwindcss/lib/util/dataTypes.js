"use strict";function _export(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{normalize:function(){return normalize},normalizeAttributeSelectors:function(){return normalizeAttributeSelectors},url:function(){return url},number:function(){return number},percentage:function(){return percentage},length:function(){return length},lineWidth:function(){return lineWidth},shadow:function(){return shadow},color:function(){return color},image:function(){return image},gradient:function(){return gradient},position:function(){return position},familyName:function(){return familyName},genericName:function(){return genericName},absoluteSize:function(){return absoluteSize},relativeSize:function(){return relativeSize}});const _color=require("./color"),_parseBoxShadowValue=require("./parseBoxShadowValue"),_splitAtTopLevelOnly=require("./splitAtTopLevelOnly");let cssFunctions=["min","max","clamp","calc"];function isCSSFunction(e){return cssFunctions.some(t=>new RegExp(`^${t}\\(.*\\)`).test(e))}const AUTO_VAR_INJECTION_EXCEPTIONS=new Set(["scroll-timeline-name","timeline-scope","view-timeline-name","font-palette","anchor-name","anchor-scope","position-anchor","position-try-options","scroll-timeline","animation-timeline","view-timeline","position-try"]);function normalize(e,t=null,n=!0){let r=t&&AUTO_VAR_INJECTION_EXCEPTIONS.has(t.property);return e.startsWith("--")&&!r?`var(${e})`:e.includes("url(")?e.split(/(url\(.*?\))/g).filter(Boolean).map(e=>/^url\(.*?\)$/.test(e)?e:normalize(e,t,!1)).join(""):(e=e.replace(/([^\\])_+/g,(e,t)=>t+" ".repeat(e.length-1)).replace(/^_/g," ").replace(/\\_/g,"_"),n&&(e=e.trim()),e=normalizeMathOperatorSpacing(e))}function normalizeAttributeSelectors(e){return e.includes("=")&&(e=e.replace(/(=.*)/g,(e,t)=>{if("'"===t[1]||'"'===t[1])return t;if(t.length>2){let e=t[t.length-1];if(" "===t[t.length-2]&&("i"===e||"I"===e||"s"===e||"S"===e))return`="${t.slice(1,-2)}" ${t[t.length-1]}`}return`="${t.slice(1)}"`})),e}function normalizeMathOperatorSpacing(e){let t=["theme"],n=["min-content","max-content","fit-content","safe-area-inset-top","safe-area-inset-right","safe-area-inset-bottom","safe-area-inset-left","titlebar-area-x","titlebar-area-y","titlebar-area-width","titlebar-area-height","keyboard-inset-top","keyboard-inset-right","keyboard-inset-bottom","keyboard-inset-left","keyboard-inset-width","keyboard-inset-height","radial-gradient","linear-gradient","conic-gradient","repeating-radial-gradient","repeating-linear-gradient","repeating-conic-gradient","anchor-size"];return e.replace(/(calc|min|max|clamp)\(.+\)/g,e=>{let r="";function i(){let e=r.trimEnd();return e[e.length-1]}for(let l=0;l<e.length;l++){function a(t){return t.split("").every((t,n)=>e[l+n]===t)}function o(t){let n=1/0;for(let r of t){let t=e.indexOf(r,l);-1!==t&&t<n&&(n=t)}let r=e.slice(l,n);return l+=r.length-1,r}let s=e[l];if(a("var"))r+=o([")",","]);else if(n.some(e=>a(e))){let u=n.find(e=>a(e));r+=u,l+=u.length-1}else t.some(e=>a(e))?r+=o([")"]):a("[")?r+=o(["]"]):["+","-","*","/"].includes(s)&&!["(","+","-","*","/",","].includes(i())?r+=` ${s} `:r+=s}return r.replace(/\s+/g," ")})}function url(e){return e.startsWith("url(")}function number(e){return!isNaN(Number(e))||isCSSFunction(e)}function percentage(e){return e.endsWith("%")&&number(e.slice(0,-1))||isCSSFunction(e)}let lengthUnits=["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","lh","rlh","vw","vh","vmin","vmax","vb","vi","svw","svh","lvw","lvh","dvw","dvh","cqw","cqh","cqi","cqb","cqmin","cqmax"],lengthUnitsPattern=`(?:${lengthUnits.join("|")})`;function length(e){return"0"===e||new RegExp(`^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?${lengthUnitsPattern}$`).test(e)||isCSSFunction(e)}let lineWidths=new Set(["thin","medium","thick"]);function lineWidth(e){return lineWidths.has(e)}function shadow(e){let t=(0,_parseBoxShadowValue.parseBoxShadowValue)(normalize(e));for(let e of t)if(!e.valid)return!1;return!0}function color(e){let t=0;return!!(0,_splitAtTopLevelOnly.splitAtTopLevelOnly)(e,"_").every(e=>!!(e=normalize(e)).startsWith("var(")||null!==(0,_color.parseColor)(e,{loose:!0})&&(t++,!0))&&t>0}function image(e){let t=0;return!!(0,_splitAtTopLevelOnly.splitAtTopLevelOnly)(e,",").every(e=>!!(e=normalize(e)).startsWith("var(")||!!(url(e)||gradient(e)||["element(","image(","cross-fade(","image-set("].some(t=>e.startsWith(t)))&&(t++,!0))&&t>0}let gradientTypes=new Set(["conic-gradient","linear-gradient","radial-gradient","repeating-conic-gradient","repeating-linear-gradient","repeating-radial-gradient"]);function gradient(e){e=normalize(e);for(let t of gradientTypes)if(e.startsWith(`${t}(`))return!0;return!1}let validPositions=new Set(["center","top","right","bottom","left"]);function position(e){let t=0;return!!(0,_splitAtTopLevelOnly.splitAtTopLevelOnly)(e,"_").every(e=>!!(e=normalize(e)).startsWith("var(")||!!(validPositions.has(e)||length(e)||percentage(e))&&(t++,!0))&&t>0}function familyName(e){let t=0;return!!(0,_splitAtTopLevelOnly.splitAtTopLevelOnly)(e,",").every(e=>!!(e=normalize(e)).startsWith("var(")||!(e.includes(" ")&&!/(['"])([^"']+)\1/g.test(e))&&(!/^\d/g.test(e)&&(t++,!0)))&&t>0}let genericNames=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]);function genericName(e){return genericNames.has(e)}let absoluteSizes=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"]);function absoluteSize(e){return absoluteSizes.has(e)}let relativeSizes=new Set(["larger","smaller"]);function relativeSize(e){return relativeSizes.has(e)}