"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"movePseudos",{enumerable:!0,get:function(){return movePseudos}});let elementProperties={"::after":["terminal","jumpable"],"::backdrop":["terminal","jumpable"],"::before":["terminal","jumpable"],"::cue":["terminal"],"::cue-region":["terminal"],"::first-letter":["terminal","jumpable"],"::first-line":["terminal","jumpable"],"::grammar-error":["terminal"],"::marker":["terminal","jumpable"],"::part":["terminal","actionable"],"::placeholder":["terminal","jumpable"],"::selection":["terminal","jumpable"],"::slotted":["terminal"],"::spelling-error":["terminal"],"::target-text":["terminal"],"::file-selector-button":["terminal","actionable"],"::deep":["actionable"],"::v-deep":["actionable"],"::ng-deep":["actionable"],":after":["terminal","jumpable"],":before":["terminal","jumpable"],":first-letter":["terminal","jumpable"],":first-line":["terminal","jumpable"],":where":[],":is":[],":has":[],__default__:["terminal","actionable"]};function movePseudos(e){let[t]=movablePseudos(e);return t.forEach(([e,t])=>e.removeChild(t)),e.nodes.push(...t.map(([,e])=>e)),e}function movablePseudos(e){let t=[],l=null;for(let a of e.nodes)if("combinator"===a.type)t=t.filter(([,e])=>propertiesForPseudo(e).includes("jumpable")),l=null;else if("pseudo"===a.type){var r;isMovablePseudoElement(a)?(l=a,t.push([e,a,null])):l&&isAttachablePseudoClass(a,l)?t.push([e,a,l]):l=null;for(let e of null!==(r=a.nodes)&&void 0!==r?r:[]){let[r,a]=movablePseudos(e);l=a||l,t.push(...r)}}return[t,l]}function isPseudoElement(e){return e.value.startsWith("::")||void 0!==elementProperties[e.value]}function isMovablePseudoElement(e){return isPseudoElement(e)&&propertiesForPseudo(e).includes("terminal")}function isAttachablePseudoClass(e,t){return"pseudo"===e.type&&!isPseudoElement(e)&&propertiesForPseudo(t).includes("actionable")}function propertiesForPseudo(e){var t;return null!==(t=elementProperties[e.value])&&void 0!==t?t:elementProperties.__default__}