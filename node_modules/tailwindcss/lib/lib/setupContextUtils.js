"use strict";function _export(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{INTERNAL_FEATURES:function(){return INTERNAL_FEATURES},isValidVariantFormatString:function(){return isValidVariantFormatString},parseVariant:function(){return parseVariant},getFileModifiedMap:function(){return getFileModifiedMap},createContext:function(){return createContext},getContext:function(){return getContext}});const _fs=_interop_require_default(require("fs")),_url=_interop_require_default(require("url")),_postcss=_interop_require_default(require("postcss")),_dlv=_interop_require_default(require("dlv")),_postcssselectorparser=_interop_require_default(require("postcss-selector-parser")),_transformThemeValue=_interop_require_default(require("../util/transformThemeValue")),_parseObjectStyles=_interop_require_default(require("../util/parseObjectStyles")),_prefixSelector=_interop_require_default(require("../util/prefixSelector")),_isPlainObject=_interop_require_default(require("../util/isPlainObject")),_escapeClassName=_interop_require_default(require("../util/escapeClassName")),_nameClass=_interop_require_wildcard(require("../util/nameClass")),_pluginUtils=require("../util/pluginUtils"),_corePlugins=require("../corePlugins"),_sharedState=_interop_require_wildcard(require("./sharedState")),_toPath=require("../util/toPath"),_log=_interop_require_default(require("../util/log")),_negateValue=_interop_require_default(require("../util/negateValue")),_isSyntacticallyValidPropertyValue=_interop_require_default(require("../util/isSyntacticallyValidPropertyValue")),_generateRules=require("./generateRules"),_cacheInvalidation=require("./cacheInvalidation.js"),_offsets=require("./offsets.js"),_featureFlags=require("../featureFlags.js"),_formatVariantSelector=require("../util/formatVariantSelector");function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache=function(e){return e?a:t})(e)}function _interop_require_wildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_getRequireWildcardCache(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=i?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}const INTERNAL_FEATURES=Symbol(),VARIANT_TYPES={AddVariant:Symbol.for("ADD_VARIANT"),MatchVariant:Symbol.for("MATCH_VARIANT")},VARIANT_INFO={Base:1,Dynamic:2};function prefix(e,t){let a=e.tailwindConfig.prefix;return"function"==typeof a?a(t):a+t}function normalizeOptionTypes({type:e="any",...t}){return{...t,types:[].concat(e).map(e=>Array.isArray(e)?{type:e[0],...e[1]}:{type:e,preferOnConflict:!1})}}function parseVariantFormatString(e){let t=[],a="",r=0;for(let i=0;i<e.length;i++){let n=e[i];if("\\"===n)a+="\\"+e[++i];else if("{"===n)++r,t.push(a.trim()),a="";else if("}"===n){if(--r<0)throw new Error("Your { and } are unbalanced.");t.push(a.trim()),a=""}else a+=n}return a.length>0&&t.push(a.trim()),t=t.filter(e=>""!==e),t}function insertInto(e,t,{before:a=[]}={}){if((a=[].concat(a)).length<=0)return void e.push(t);let r=e.length-1;for(let t of a){let a=e.indexOf(t);-1!==a&&(r=Math.min(r,a))}e.splice(r,0,t)}function parseStyles(e){return Array.isArray(e)?e.flatMap(e=>!Array.isArray(e)&&!(0,_isPlainObject.default)(e)?e:(0,_parseObjectStyles.default)(e)):parseStyles([e])}function getClasses(e,t){return(0,_postcssselectorparser.default)(e=>{let a=[];return t&&t(e),e.walkClasses(e=>{a.push(e.value)}),a}).transformSync(e)}function ignoreNot(e){e.walkPseudos(e=>{":not"===e.value&&e.remove()})}function extractCandidates(e,t={containsNonOnDemandable:!1},a=0){let r=[],i=[];"rule"===e.type?i.push(...e.selectors):"atrule"===e.type&&e.walkRules(e=>i.push(...e.selectors));for(let e of i){let a=getClasses(e,ignoreNot);0===a.length&&(t.containsNonOnDemandable=!0);for(let e of a)r.push(e)}return 0===a?[t.containsNonOnDemandable||0===r.length,r]:r}function withIdentifiers(e){return parseStyles(e).flatMap(e=>{let t=new Map,[a,r]=extractCandidates(e);return a&&r.unshift(_sharedState.NOT_ON_DEMAND),r.map(a=>(t.has(e)||t.set(e,e),[a,t.get(e)]))})}function isValidVariantFormatString(e){return e.startsWith("@")||e.includes("&")}function parseVariant(e){let t=parseVariantFormatString(e=e.replace(/\n+/g,"").replace(/\s{1,}/g," ").trim()).map(e=>{if(!e.startsWith("@"))return({format:t})=>t(e);let[,t,a]=/@(\S*)( .+|[({].*)?/g.exec(e);var r;return({wrap:e})=>e(_postcss.default.atRule({name:t,params:null!==(r=null==a?void 0:a.trim())&&void 0!==r?r:""}))}).reverse();return e=>{for(let a of t)a(e)}}function buildPluginApi(e,t,{variantList:a,variantMap:r,offsets:i,classList:n}){function l(t,a){return t?(0,_dlv.default)(e,t,a):e}function s(e,a){return e===_sharedState.NOT_ON_DEMAND?_sharedState.NOT_ON_DEMAND:a.respectPrefix?t.tailwindConfig.prefix+e:e}let o=0,u={postcss:_postcss.default,prefix:function(t){return(0,_prefixSelector.default)(e.prefix,t)},e:_escapeClassName.default,config:l,theme:function(e,t,a={}){let r=(0,_toPath.toPath)(e),i=l(["theme",...r],t);return(0,_transformThemeValue.default)(r[0])(i,a)},corePlugins:t=>Array.isArray(e.corePlugins)?e.corePlugins.includes(t):l(["corePlugins",t],!0),variants:()=>[],addBase(e){for(let[a,r]of withIdentifiers(e)){let e=s(a,{}),n=i.create("base");t.candidateRuleMap.has(e)||t.candidateRuleMap.set(e,[]),t.candidateRuleMap.get(e).push([{sort:n,layer:"base"},r])}},addDefaults(e,a){const r={[`@defaults ${e}`]:a};for(let[e,a]of withIdentifiers(r)){let r=s(e,{});t.candidateRuleMap.has(r)||t.candidateRuleMap.set(r,[]),t.candidateRuleMap.get(r).push([{sort:i.create("defaults"),layer:"defaults"},a])}},addComponents(e,a){a=Object.assign({},{preserveSource:!1,respectPrefix:!0,respectImportant:!1},Array.isArray(a)?{}:a);for(let[r,l]of withIdentifiers(e)){let e=s(r,a);n.add(e),t.candidateRuleMap.has(e)||t.candidateRuleMap.set(e,[]),t.candidateRuleMap.get(e).push([{sort:i.create("components"),layer:"components",options:a},l])}},addUtilities(e,a){a=Object.assign({},{preserveSource:!1,respectPrefix:!0,respectImportant:!0},Array.isArray(a)?{}:a);for(let[r,l]of withIdentifiers(e)){let e=s(r,a);n.add(e),t.candidateRuleMap.has(e)||t.candidateRuleMap.set(e,[]),t.candidateRuleMap.get(e).push([{sort:i.create("utilities"),layer:"utilities",options:a},l])}},matchUtilities:function(a,r){r=normalizeOptionTypes({respectPrefix:!0,respectImportant:!0,modifiers:!1,...r});let l=i.create("utilities");for(let o in a){let u=s(o,r),c=a[o];function f(t,{isOnlyPlugin:a}){let[i,n,l]=(0,_pluginUtils.coerceValue)(r.types,t,r,e);if(void 0===i)return[];if(!r.types.some(({type:e})=>e===n)){if(!a)return[];_log.default.warn([`Unnecessary typehint \`${n}\` in \`${o}-${t}\`.`,`You can safely update it to \`${o}-${t.replace(n+":","")}\`.`])}if(!(0,_isSyntacticallyValidPropertyValue.default)(i))return[];let s={get modifier(){return r.modifiers||_log.default.warn(`modifier-used-without-options-for-${o}`,["Your plugin must set `modifiers: true` in its options to support modifiers."]),l}},u=(0,_featureFlags.flagEnabled)(e,"generalizedModifiers");return[].concat(u?c(i,s):c(i)).filter(Boolean).map(e=>({[(0,_nameClass.default)(o,t)]:e}))}n.add([u,r]);let d=[{sort:l,layer:"utilities",options:r},f];t.candidateRuleMap.has(u)||t.candidateRuleMap.set(u,[]),t.candidateRuleMap.get(u).push(d)}},matchComponents:function(a,r){r=normalizeOptionTypes({respectPrefix:!0,respectImportant:!1,modifiers:!1,...r});let l=i.create("components");for(let o in a){let u=s(o,r),c=a[o];function f(t,{isOnlyPlugin:a}){let[i,n,l]=(0,_pluginUtils.coerceValue)(r.types,t,r,e);if(void 0===i)return[];if(!r.types.some(({type:e})=>e===n)){if(!a)return[];_log.default.warn([`Unnecessary typehint \`${n}\` in \`${o}-${t}\`.`,`You can safely update it to \`${o}-${t.replace(n+":","")}\`.`])}if(!(0,_isSyntacticallyValidPropertyValue.default)(i))return[];let s={get modifier(){return r.modifiers||_log.default.warn(`modifier-used-without-options-for-${o}`,["Your plugin must set `modifiers: true` in its options to support modifiers."]),l}},u=(0,_featureFlags.flagEnabled)(e,"generalizedModifiers");return[].concat(u?c(i,s):c(i)).filter(Boolean).map(e=>({[(0,_nameClass.default)(o,t)]:e}))}n.add([u,r]);let d=[{sort:l,layer:"components",options:r},f];t.candidateRuleMap.has(u)||t.candidateRuleMap.set(u,[]),t.candidateRuleMap.get(u).push(d)}},addVariant(e,i,n={}){i=[].concat(i).map(t=>{if("string"!=typeof t)return(a={})=>{let{args:r,modifySelectors:i,container:l,separator:s,wrap:o,format:u}=a,c=t(Object.assign({modifySelectors:i,container:l,separator:s},n.type===VARIANT_TYPES.MatchVariant&&{args:r,wrap:o,format:u}));if("string"==typeof c&&!isValidVariantFormatString(c))throw new Error(`Your custom variant \`${e}\` has an invalid format string. Make sure it's an at-rule or contains a \`&\` placeholder.`);return Array.isArray(c)?c.filter(e=>"string"==typeof e).map(e=>parseVariant(e)):c&&"string"==typeof c&&parseVariant(c)(a)};if(!isValidVariantFormatString(t))throw new Error(`Your custom variant \`${e}\` has an invalid format string. Make sure it's an at-rule or contains a \`&\` placeholder.`);return parseVariant(t)}),insertInto(a,e,n),r.set(e,i),t.variantOptions.set(e,n)},matchVariant(t,a,r){var i;let n=null!==(i=null==r?void 0:r.id)&&void 0!==i?i:++o,l="@"===t,s=(0,_featureFlags.flagEnabled)(e,"generalizedModifiers");var c,f;for(let[e,i]of Object.entries(null!==(c=null==r?void 0:r.values)&&void 0!==c?c:{}))"DEFAULT"!==e&&u.addVariant(l?`${t}${e}`:`${t}-${e}`,({args:e,container:t})=>a(i,s?{modifier:null==e?void 0:e.modifier,container:t}:{container:t}),{...r,value:i,id:n,type:VARIANT_TYPES.MatchVariant,variantInfo:VARIANT_INFO.Base});let d="DEFAULT"in(null!==(f=null==r?void 0:r.values)&&void 0!==f?f:{});u.addVariant(t,({args:e,container:t})=>{return(null==e?void 0:e.value)!==_sharedState.NONE||d?a((null==e?void 0:e.value)===_sharedState.NONE?r.values.DEFAULT:null!==(i=null==e?void 0:e.value)&&void 0!==i?i:"string"==typeof e?e:"",s?{modifier:null==e?void 0:e.modifier,container:t}:{container:t}):null;var i},{...r,id:n,type:VARIANT_TYPES.MatchVariant,variantInfo:VARIANT_INFO.Dynamic})}};return u}let fileModifiedMapCache=new WeakMap;function getFileModifiedMap(e){return fileModifiedMapCache.has(e)||fileModifiedMapCache.set(e,new Map),fileModifiedMapCache.get(e)}function trackModified(e,t){let a=!1,r=new Map;for(let n of e){var i;if(!n)continue;let e=_url.default.parse(n),l=e.hash?e.href.replace(e.hash,""):e.href;l=e.search?l.replace(e.search,""):l;let s=null===(i=_fs.default.statSync(decodeURIComponent(l),{throwIfNoEntry:!1}))||void 0===i?void 0:i.mtimeMs;s&&((!t.has(n)||s>t.get(n))&&(a=!0),r.set(n,s))}return[a,r]}function extractVariantAtRules(e){e.walkAtRules(e=>{["responsive","variants"].includes(e.name)&&(extractVariantAtRules(e),e.before(e.nodes),e.remove())})}function collectLayerPlugins(e){let t=[];return e.each(e=>{"atrule"===e.type&&["responsive","variants"].includes(e.name)&&(e.name="layer",e.params="utilities")}),e.walkAtRules("layer",e=>{if(extractVariantAtRules(e),"base"===e.params){for(let a of e.nodes)t.push(function({addBase:e}){e(a,{respectPrefix:!1})});e.remove()}else if("components"===e.params){for(let a of e.nodes)t.push(function({addComponents:e}){e(a,{respectPrefix:!1,preserveSource:!0})});e.remove()}else if("utilities"===e.params){for(let a of e.nodes)t.push(function({addUtilities:e}){e(a,{respectPrefix:!1,preserveSource:!0})});e.remove()}}),t}function resolvePlugins(e,t){let a=Object.entries({..._corePlugins.variantPlugins,..._corePlugins.corePlugins}).map(([t,a])=>e.tailwindConfig.corePlugins.includes(t)?a:null).filter(Boolean),r=e.tailwindConfig.plugins.map(e=>(e.__isOptionsFunction&&(e=e()),"function"==typeof e?e:e.handler)),i=collectLayerPlugins(t),n=[_corePlugins.variantPlugins.childVariant,_corePlugins.variantPlugins.pseudoElementVariants,_corePlugins.variantPlugins.pseudoClassVariants,_corePlugins.variantPlugins.hasVariants,_corePlugins.variantPlugins.ariaVariants,_corePlugins.variantPlugins.dataVariants],l=[_corePlugins.variantPlugins.supportsVariants,_corePlugins.variantPlugins.reducedMotionVariants,_corePlugins.variantPlugins.prefersContrastVariants,_corePlugins.variantPlugins.screenVariants,_corePlugins.variantPlugins.orientationVariants,_corePlugins.variantPlugins.directionVariants,_corePlugins.variantPlugins.darkVariants,_corePlugins.variantPlugins.forcedColorsVariants,_corePlugins.variantPlugins.printVariant];return("class"===e.tailwindConfig.darkMode||Array.isArray(e.tailwindConfig.darkMode)&&"class"===e.tailwindConfig.darkMode[0])&&(l=[_corePlugins.variantPlugins.supportsVariants,_corePlugins.variantPlugins.reducedMotionVariants,_corePlugins.variantPlugins.prefersContrastVariants,_corePlugins.variantPlugins.darkVariants,_corePlugins.variantPlugins.screenVariants,_corePlugins.variantPlugins.orientationVariants,_corePlugins.variantPlugins.directionVariants,_corePlugins.variantPlugins.forcedColorsVariants,_corePlugins.variantPlugins.printVariant]),[...a,...n,...r,...l,...i]}function registerPlugins(e,t){let a=[],r=new Map;t.variantMap=r;let i=new _offsets.Offsets;t.offsets=i;let n=new Set,l=buildPluginApi(t.tailwindConfig,t,{variantList:a,variantMap:r,offsets:i,classList:n});for(let t of e)if(Array.isArray(t))for(let e of t)e(l);else null==t||t(l);i.recordVariants(a,e=>r.get(e).length);for(let[e,a]of r.entries())t.variantMap.set(e,a.map((t,a)=>[i.forVariant(e,a),t]));var s;let o=(null!==(s=t.tailwindConfig.safelist)&&void 0!==s?s:[]).filter(Boolean);if(o.length>0){let e=[];for(let a of o)"string"!=typeof a?a instanceof RegExp?_log.default.warn("root-regex",["Regular expressions in `safelist` work differently in Tailwind CSS v3.0.","Update your `safelist` configuration to eliminate this warning.","https://tailwindcss.com/docs/content-configuration#safelisting-classes"]):e.push(a):t.changedContent.push({content:a,extension:"html"});if(e.length>0){let a=new Map,r=t.tailwindConfig.prefix.length,i=e.some(e=>e.pattern.source.includes("!"));for(let l of n){let n=Array.isArray(l)?(()=>{let[e,a]=l;var n;let s=Object.keys(null!==(n=null==a?void 0:a.values)&&void 0!==n?n:{}).map(t=>(0,_nameClass.formatClass)(e,t));return(null==a?void 0:a.supportsNegativeValues)&&(s=[...s,...s.map(e=>"-"+e)],s=[...s,...s.map(e=>e.slice(0,r)+"-"+e.slice(r))]),a.types.some(({type:e})=>"color"===e)&&(s=[...s,...s.flatMap(e=>Object.keys(t.tailwindConfig.theme.opacity).map(t=>`${e}/${t}`))]),i&&(null==a?void 0:a.respectImportant)&&(s=[...s,...s.map(e=>"!"+e)]),s})():[l];for(let r of n)for(let{pattern:i,variants:n=[]}of e)if(i.lastIndex=0,a.has(i)||a.set(i,0),i.test(r)){a.set(i,a.get(i)+1),t.changedContent.push({content:r,extension:"html"});for(let e of n)t.changedContent.push({content:e+t.tailwindConfig.separator+r,extension:"html"})}}for(let[e,t]of a.entries())0===t&&_log.default.warn([`The safelist pattern \`${e}\` doesn't match any Tailwind CSS classes.`,"Fix this pattern or remove it from your `safelist` configuration.","https://tailwindcss.com/docs/content-configuration#safelisting-classes"])}}var u,c;let f=null!==(c=[].concat(null!==(u=t.tailwindConfig.darkMode)&&void 0!==u?u:"media")[1])&&void 0!==c?c:"dark",d=[prefix(t,f),prefix(t,"group"),prefix(t,"peer")];t.getClassOrder=function(e){let a=[...e].sort((e,t)=>e===t?0:e<t?-1:1),r=new Map(a.map(e=>[e,null])),i=(0,_generateRules.generateRules)(new Set(a),t,!0);i=t.offsets.sort(i);let n=BigInt(d.length);for(const[,e]of i){let t=e.raws.tailwind.candidate;var l;r.set(t,null!==(l=r.get(t))&&void 0!==l?l:n++)}return e.map(e=>{var t;let a=null!==(t=r.get(e))&&void 0!==t?t:null,i=d.indexOf(e);return null===a&&-1!==i&&(a=BigInt(i)),[e,a]})},t.getClassList=function(e={}){let a=[];for(let o of n)if(Array.isArray(o)){var r;let[n,u]=o,c=[];var i;let f=Object.keys(null!==(i=null==u?void 0:u.modifiers)&&void 0!==i?i:{});var l;if(null==u||null===(r=u.types)||void 0===r?void 0:r.some(({type:e})=>"color"===e))f.push(...Object.keys(null!==(l=t.tailwindConfig.theme.opacity)&&void 0!==l?l:{}));let d={modifiers:f},p=e.includeMetadata&&f.length>0;var s;for(let[e,t]of Object.entries(null!==(s=null==u?void 0:u.values)&&void 0!==s?s:{})){if(null==t)continue;let r=(0,_nameClass.formatClass)(n,e);if(a.push(p?[r,d]:r),(null==u?void 0:u.supportsNegativeValues)&&(0,_negateValue.default)(t)){let t=(0,_nameClass.formatClass)(n,`-${e}`);c.push(p?[t,d]:t)}}a.push(...c)}else a.push(o);return a},t.getVariants=function(){let e=Math.random().toString(36).substring(7).toUpperCase(),a=[];for(let[i,n]of t.variantOptions.entries()){var r;if(n.variantInfo!==VARIANT_INFO.Base)a.push({name:i,isArbitrary:n.type===Symbol.for("MATCH_VARIANT"),values:Object.keys(null!==(r=n.values)&&void 0!==r?r:{}),hasDash:"@"!==i,selectors({modifier:a,value:r}={}){let l=`TAILWINDPLACEHOLDER${e}`,s=_postcss.default.rule({selector:`.${l}`}),o=_postcss.default.root({nodes:[s.clone()]}),u=o.toString();var c;let f=(null!==(c=t.variantMap.get(i))&&void 0!==c?c:[]).flatMap(([e,t])=>t),d=[];for(let e of f){var p;let i=[];var g;let l={args:{modifier:a,value:null!==(g=null===(p=n.values)||void 0===p?void 0:p[r])&&void 0!==g?g:r},separator:t.tailwindConfig.separator,modifySelectors:e=>(o.each(t=>{"rule"===t.type&&(t.selectors=t.selectors.map(t=>e({get className(){return(0,_generateRules.getClassNameFromSelector)(t)},selector:t})))}),o),format(e){i.push(e)},wrap(e){i.push(`@${e.name} ${e.params} { & }`)},container:o},s=e(l);if(i.length>0&&d.push(i),Array.isArray(s))for(let e of s)i=[],e(l),d.push(i)}let _=[];var m;u!==o.toString()&&(o.walkRules(e=>{let a=e.selector,r=(0,_postcssselectorparser.default)(e=>{e.walkClasses(e=>{e.value=`${i}${t.tailwindConfig.separator}${e.value}`})}).processSync(a);_.push(a.replace(r,"&").replace(l,"&"))}),o.walkAtRules(e=>{_.push(`@${e.name} (${e.params}) { & }`)}));let h=!(r in(null!==(m=n.values)&&void 0!==m?m:{}));var v;let y=null!==(v=n[INTERNAL_FEATURES])&&void 0!==v?v:{},M=!h&&!1!==y.respectPrefix;d=d.map(e=>e.map(e=>({format:e,respectPrefix:M}))),_=_.map(e=>({format:e,respectPrefix:M}));let C={candidate:l,context:t},P=d.map(e=>(0,_formatVariantSelector.finalizeSelector)(`.${l}`,(0,_formatVariantSelector.formatVariantSelector)(e,C),C).replace(`.${l}`,"&").replace("{ & }","").trim());return _.length>0&&P.push((0,_formatVariantSelector.formatVariantSelector)(_,C).toString().replace(`.${l}`,"&")),P}})}return a}}function markInvalidUtilityCandidate(e,t){e.classCache.has(t)&&(e.notClassCache.add(t),e.classCache.delete(t),e.applyClassCache.delete(t),e.candidateRuleMap.delete(t),e.candidateRuleCache.delete(t),e.stylesheetCache=null)}function markInvalidUtilityNode(e,t){let a=t.raws.tailwind.candidate;if(a){for(const t of e.ruleCache)t[1].raws.tailwind.candidate===a&&e.ruleCache.delete(t);markInvalidUtilityCandidate(e,a)}}function createContext(e,t=[],a=_postcss.default.root()){var r;let i={disposables:[],ruleCache:new Set,candidateRuleCache:new Map,classCache:new Map,applyClassCache:new Map,notClassCache:new Set(null!==(r=e.blocklist)&&void 0!==r?r:[]),postCssNodeCache:new Map,candidateRuleMap:new Map,tailwindConfig:e,changedContent:t,variantMap:new Map,stylesheetCache:null,variantOptions:new Map,markInvalidUtilityCandidate:e=>markInvalidUtilityCandidate(i,e),markInvalidUtilityNode:e=>markInvalidUtilityNode(i,e)};return registerPlugins(resolvePlugins(i,a),i),i}let contextMap=_sharedState.contextMap,configContextMap=_sharedState.configContextMap,contextSourcesMap=_sharedState.contextSourcesMap;function getContext(e,t,a,r,i,n){let l,s=t.opts.from,o=null!==r;if(_sharedState.env.DEBUG&&console.log("Source path:",s),o&&contextMap.has(s))l=contextMap.get(s);else if(configContextMap.has(i)){let e=configContextMap.get(i);contextSourcesMap.get(e).add(s),contextMap.set(s,e),l=e}let u=(0,_cacheInvalidation.hasContentChanged)(s,e);if(l){let[e,t]=trackModified([...n],getFileModifiedMap(l));if(!e&&!u)return[l,!1,t]}if(contextMap.has(s)){let e=contextMap.get(s);if(contextSourcesMap.has(e)&&(contextSourcesMap.get(e).delete(s),0===contextSourcesMap.get(e).size)){contextSourcesMap.delete(e);for(let[t,a]of configContextMap)a===e&&configContextMap.delete(t);for(let t of e.disposables.splice(0))t(e)}}_sharedState.env.DEBUG&&console.log("Setting up new context...");let c=createContext(a,[],e);Object.assign(c,{userConfigPath:r});let[,f]=trackModified([...n],getFileModifiedMap(c));return configContextMap.set(i,c),contextMap.set(s,c),contextSourcesMap.has(c)||contextSourcesMap.set(c,new Set),contextSourcesMap.get(c).add(s),[c,!0,f]}