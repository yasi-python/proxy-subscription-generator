"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return getModuleDependencies}});const _fs=_interop_require_default(require("fs")),_path=_interop_require_default(require("path"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}let jsExtensions=[".js",".cjs",".mjs"],jsResolutionOrder=["",".js",".cjs",".mjs",".ts",".cts",".mts",".jsx",".tsx"],tsResolutionOrder=["",".ts",".cts",".mts",".tsx",".js",".cjs",".mjs",".jsx"];function resolveWithExtension(e,t){for(let s of t){let t=`${e}${s}`;if(_fs.default.existsSync(t)&&_fs.default.statSync(t).isFile())return t}for(let s of t){let t=`${e}/index${s}`;if(_fs.default.existsSync(t))return t}return null}function*_getModuleDependencies(e,t,s,n=_path.default.extname(e)){let r=resolveWithExtension(_path.default.resolve(t,e),jsExtensions.includes(n)?jsResolutionOrder:tsResolutionOrder);if(null===r)return;if(s.has(r))return;s.add(r),yield r,t=_path.default.dirname(r),n=_path.default.extname(r);let l=_fs.default.readFileSync(r,"utf-8");for(let e of[...l.matchAll(/import[\s\S]*?['"](.{3,}?)['"]/gi),...l.matchAll(/import[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi),...l.matchAll(/require\(['"`](.+)['"`]\)/gi)])e[1].startsWith(".")&&(yield*_getModuleDependencies(e[1],t,s,n))}function getModuleDependencies(e){return null===e?new Set:new Set(_getModuleDependencies(e,_path.default.dirname(e),new Set))}