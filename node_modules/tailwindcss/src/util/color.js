import namedColors from"./colorNames";let HEX=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,SHORT_HEX=/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,VALUE=/(?:\d+|\d*\.\d+)%?/,SEP=/(?:\s*,\s*|\s+)/,ALPHA_SEP=/\s*[,/]\s*/,CUSTOM_PROPERTY=/var\(--(?:[^ )]*?)(?:,(?:[^ )]*?|var\(--[^ )]*?\)))?\)/,RGB=new RegExp(`^(rgba?)\\(\\s*(${VALUE.source}|${CUSTOM_PROPERTY.source})(?:${SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?(?:${SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?(?:${ALPHA_SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?\\s*\\)$`),HSL=new RegExp(`^(hsla?)\\(\\s*((?:${VALUE.source})(?:deg|rad|grad|turn)?|${CUSTOM_PROPERTY.source})(?:${SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?(?:${SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?(?:${ALPHA_SEP.source}(${VALUE.source}|${CUSTOM_PROPERTY.source}))?\\s*\\)$`);export function parseColor(r,{loose:o=!1}={}){if("string"!=typeof r)return null;if("transparent"===(r=r.trim()))return{mode:"rgb",color:["0","0","0"],alpha:"0"};if(r in namedColors)return{mode:"rgb",color:namedColors[r].map(r=>r.toString())};let e=r.replace(SHORT_HEX,(r,o,e,t,a)=>["#",o,o,e,e,t,t,a?a+a:""].join("")).match(HEX);if(null!==e)return{mode:"rgb",color:[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)].map(r=>r.toString()),alpha:e[4]?(parseInt(e[4],16)/255).toString():void 0};let t=r.match(RGB)??r.match(HSL);if(null===t)return null;let a=[t[2],t[3],t[4]].filter(Boolean).map(r=>r.toString());return 2===a.length&&a[0].startsWith("var(")?{mode:t[1],color:[a[0]],alpha:a[1]}:o||3===a.length?a.length<3&&!a.some(r=>/^var\(.*?\)$/.test(r))?null:{mode:t[1],color:a,alpha:t[5]?.toString?.()}:null}export function formatColor({mode:r,color:o,alpha:e}){let t=void 0!==e;return"rgba"===r||"hsla"===r?`${r}(${o.join(", ")}${t?`, ${e}`:""})`:`${r}(${o.join(" ")}${t?` / ${e}`:""})`}