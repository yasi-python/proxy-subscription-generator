import fs from"fs";import path from"path";import{resolveDefaultConfigPath}from"../../util/resolveConfigPath.js";import{createProcessor}from"./plugin.js";export async function build(e){let o=e["--input"],i=e["--watch"];!o&&e._[1]&&(console.error("[deprecation] Running tailwindcss without -i, please provide an input file."),o=e["--input"]=e._[1]),o&&"-"!==o&&!fs.existsSync(o=path.resolve(o))&&(console.error(`Specified input file ${e["--input"]} does not exist.`),process.exit(9)),e["--config"]&&!fs.existsSync(e["--config"]=path.resolve(e["--config"]))&&(console.error(`Specified config file ${e["--config"]} does not exist.`),process.exit(9));let t=e["--config"]?e["--config"]:resolveDefaultConfigPath(),s=await createProcessor(e,t);i?("always"!==e["--watch"]&&process.stdin.on("end",()=>process.exit(0)),process.stdin.resume(),await s.watch()):await s.build().catch(e=>{console.error(e),process.exit(1)})}