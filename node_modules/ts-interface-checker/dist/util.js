"use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailContext=exports.NoopContext=exports.VError=void 0;var VError=function(t){function e(o,r){var n=t.call(this,r)||this;return n.path=o,Object.setPrototypeOf(n,e.prototype),n}return __extends(e,t),e}(Error);exports.VError=VError;var NoopContext=function(){function t(){}return t.prototype.fail=function(t,e,o){return!1},t.prototype.unionResolver=function(){return this},t.prototype.createContext=function(){return this},t.prototype.resolveUnion=function(t){},t}();exports.NoopContext=NoopContext;var DetailContext=function(){function t(){this._propNames=[""],this._messages=[null],this._score=0}return t.prototype.fail=function(t,e,o){return this._propNames.push(t),this._messages.push(e),this._score+=o,!1},t.prototype.unionResolver=function(){return new DetailUnionResolver},t.prototype.resolveUnion=function(t){for(var e,o,r=null,n=0,s=t.contexts;n<s.length;n++){var p=s[n];(!r||p._score>=r._score)&&(r=p)}r&&r._score>0&&((e=this._propNames).push.apply(e,r._propNames),(o=this._messages).push.apply(o,r._messages))},t.prototype.getError=function(t){for(var e=[],o=this._propNames.length-1;o>=0;o--){var r=this._propNames[o];t+="number"==typeof r?"["+r+"]":r?"."+r:"";var n=this._messages[o];n&&e.push(t+" "+n)}return new VError(t,e.join("; "))},t.prototype.getErrorDetail=function(t){for(var e=[],o=this._propNames.length-1;o>=0;o--){var r=this._propNames[o];t+="number"==typeof r?"["+r+"]":r?"."+r:"";var n=this._messages[o];n&&e.push({path:t,message:n})}var s=null;for(o=e.length-1;o>=0;o--)s&&(e[o].nested=[s]),s=e[o];return s},t}();exports.DetailContext=DetailContext;var DetailUnionResolver=function(){function t(){this.contexts=[]}return t.prototype.createContext=function(){var t=new DetailContext;return this.contexts.push(t),t},t}();